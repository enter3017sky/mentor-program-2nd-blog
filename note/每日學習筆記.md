# 每日學習筆記

## 2018-12-02

### 1. 優化 week7-2 to-do list

 - 1.增加功能: 新增留言的淡出效果 `fadeIn()`。

```html
<ul class="todo_list">
    <li></li>
    <li></li>
    <li></li>
</ul>
```

```js
// 新增 todo   版本1: 無效果
let addNewToDo = $('.todo_list').append(<li>new to do</li>);

// 版本2: 新增時，整個 list 一起 fadeIn
$($('.todo_list').append(newTodo)).hide().fadeIn(1000)

// 版本3: 這兩種寫法都可以, 只有新增的項目 fadeIn

$(newTodo).hide().appendTo('.todo_list').fadeIn(500)
$('.todo_list').append($(newTodo).hide().fadeIn(500))
```

- 2. 優化 fadeOut/remove

- example 1:

```javascript
// 原本
el.parent().parent().fadeOut(500, function() {
   el.parent().parent().remove();
})

// 使用 $(this)
el.parent().parent().fadeOut(500, function() {
   $(this).remove();
})
```

- example 2:

```javascript
如果在不同的地方使用它，你應該把它變成一個插件。

jQuery.fn.fadeOutAndRemove = function(speed){
    $(this).fadeOut(speed,function(){
        $(this).remove();
    })
}
然後：
// Somewhere in the program code.
$('div').fadeOutAndRemove('fast');

```
參考資料：[How to “fadeOut” & “remove” a div in jQuery?](https://stackoverflow.com/a/8935220/10680064)


### 2. append()、appendTo()、prepend()、prependTo()



Child => appendTo => Parent
Parent => append => Child

```html
<!-- Here goes the Before -->
<div>
    <!-- Here goes the pr   epend -->
    This is div
    <!-- Here goes the Append -->
</div>
<!-- Here goes the After -->
```


添加到指定元素内部的后面
$(A).append(B)// 把B追加到A
$(A).appendTo(B)// 把A追加到B

添加到指定元素内部的前面
$(A).prepend(B)// 把B前置到A
$(A).prependTo(B)// 把A前置到B

添加到指定元素外部的后面
$(A).after(B)// 把B放到A的后面
$(A).insertAfter(B)// 把A放到B的后面

添加到指定元素外部的前面
$(A).before(B)// 把B放到A的前面
$(A).insertBefore(B)// 把A放到B的前面
參考資料：[jQuery](https://tw.saowen.com/a/06edaebb61dcfbc80b68024465936047b844fa8dafdd8c08602280bbde43a067)


- `before`: 在每个 p 元素前插入内容：

```js
$("button").click(function(){
  $("p").before("<p>Hello world!</p>");
});
```

- `insertBefore()`: 在每個 p 元素之前插入 span 元素：

```js
$("button").click(function(){
  $("<span>Hello world!</span>").insertBefore("p");
});
```

- `prepend()`: 在 p 元素的開頭插入內容：

```js
$(".btn1").click(function(){
  $("p"). prepend("<b>Hello world!</b>");
});
```

- `prependTo()`: 在每個 p 元素的開頭插入內容：

```js
$(".btn1").click(function(){
  $("<b>Hello World!</b>"). prependTo("p");
});
```

- `append()`: 在每個 p 元素結尾插入内容：

```js
$("button").click(function(){
  $("p").append(" <b>Hello world!</b>");
});
```

- `appendTo()`: 在每個 p 元素結尾插入內容：

```js
$("button").click(function(){
  $("<b>Hello World!</b>"). appendTo("p");
});
```

- `after`: 在每個 p 元素後插入內容：

```
$("button").click(function(){
  $("p"). after("<p>Hello world!</p>");
});
```

- `insertAfter()` 在每個 p 元素之後插入 span 元素：

```js
$("button").click(function(){
  $("<span>Hello world!</span>").insertAfter("p");
});
```
---

## 2018-12-03

思考留言板 ajax 編輯的邏輯

- `toISOString()`

```js
var today = new Date('05 October 2011 14:48 UTC');
console.log(today.toISOString()); // Returns 2011-10-05T14:48:00.000Z
```

```js
// 思考中
var check = function (){
    $eT = $(e.target)
    if($eT.parents('.sub-meg__user')){
        return $(this).parents('.sub-meg__user')
        console.log('sub-meg__user')
    } else {
        return $(this).parents('.meg__wrap')
        console.log('meg__wrap')
    }
}
check($eT)
```

- `phpinfo();`: 查看 PHP 版本以及相關資訊

- php 時區設定
1. 修改 php.ini 的設定:

   1. 路徑: `root/etc/php.ini`
   2. php.ini 裡面修改 `date.timezone=Asia/Taipei`
   3. 重新啟動 apache

2. 使用 php function: 在 php 內輸入 `date_default_timezone_set("Asia/Taipei")`

- `$timestamp = date('Y-m-d H:i:s');`: 留言板的新增留言的時間戳的做法

---

## 2018-12-04

- 留言板編輯留言，按下 submit 送出已編輯留言的時候，如果用 `.text()` 或 `.html()`，不能及時取得 textarea 的內容文字。用`val()` 才可以。

```js
const content = $eT.parents('.comments__wrapper').find('.editDone') // 取得編輯的文字

console.log(typeof content)
console.log('html(): ', content.html())
console.log('text(): ', content.text())
console.log('val(): ', content.val())
```

[](http://www.eion.com.tw/Blogger/?Pid=1148)

- 兩個方式幫數字補零，10 以下的數字經過轉換會變成字串

```js
if(s.toString().length === 1) {
  s = '0'+s;
}
if(s < 10) {
  s = '0'+s;
}
```

- 把 javascript 抽離起來之後，php 的時間函數不能用在 .js 裡面，所以這次用 js 的時間函式
  - getMonth() 像 index 從 0 開始，故 +1

```js
function showTime() {
  const today = new Date();
  const y = today.getFullYear();
  let month = today.getMonth()+1;
  let day = today.getDate();
  let h = today.getHours();
  let m = today.getMinutes();
  let s = today.getSeconds();
  if(day < 10) {
      day = '0'+day
  }
  if(h < 10) {
      h = '0'+h
  }
  if(m < 10) {
      m = '0'+m
  }
  if(s < 10) {
      s = '0'+s;
  }
  return `${y}-${month}-${day} ${h}:${m}:${s}`;
}
```

- VS Code 打開當下文件路徑的終端機: __` Option（或Alt）鍵 ⌥ + Control（或 Ctrl）鍵 ⌃ + ~`__ [Terminal in place](https://marketplace.visualstudio.com/items?itemName=Maples7.terminal-inplace)

---

## 2018-12-05

1. 事件代理：原本事件掛在 $('.wrapper__form') 但是這個元素本身也是動態新增的，所以新增的留言 submit、edit、delete 都無法執行。

```js
/** 
 * 
解法1：掛高高，掛在動態新增以外的那層
不同用法？的解法2： https://stackoverflow.com/questions/8408826/bind-event-only-once
    參考至[一對一檢討：roro part 1 31:34 秒處](https://www.youtube.com/watch?v=7FDPiIgp4i0&feature=youtu.be)

*/

 $('.container').on('click', 'input.submit__btn', function(e) {...}

```

2.路徑:

- [UNIX 檔案系統教材：絕對路徑與相對路徑](https://bcc16.ncu.edu.tw/4/unix/13.shtml)
- [2-3 連結 (Links)](http://mirlab.org/jang/books/html/link.asp?title=2-3%20%B3s%B5%B2%20(Links))

3.網頁讀取的 loading 狀態顯示

- [Ajax Event](http://api.jquery.com/Ajax_Events/)

```js
Local Events
 $.ajax({
   beforeSend: function(){
     // Handle the beforeSend event
   },
   complete: function(){
     // Handle the complete event
   }
   // ......
 });


Global Events
These events are triggered on the document, calling any handlers which may be listening. You can listen for these events like so:
 $(document).bind("ajaxSend", function(){
   $("#loading").show();
 }).bind("ajaxComplete", function(){
   $("#loading").hide();
 });
```

4.function 預設參數
 - [MDN 預設參數( Default parameters )](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Functions/Default_parameters)

  - [重新認識 JavaScript: Day 17 函式裡的「參數」](https://ithelp.ithome.com.tw/articles/10192368)

  - [[筆記] 談談JavaScript中函式的參數(parameter),arguments和展開運算子(spread)](https://pjchender.blogspot.com/2016/04/javascriptparameterargumentsspread.html)

5.第二次瀏覽同學們的留言板

- 一對一檢討：rubysih

  - [08:30 左右： 更新留言的方式：判斷 POST 的值然後用函式包 sql 來編輯或刪除留言的參考](https://youtu.be/gDe0ygaui4A?t=496)
  - [17:36 左右： code 方式蠻好的：時間的補零、函式的方式、原生 JavaScript Clone Element 的使用](https://youtu.be/gDe0ygaui4A?t=1100)

- [一對一檢討：Tian](https://youtu.be/mRjydPHrK9w)



[jQuery簡明參考手冊——30分鐘快速入門jQuery](https://www.jianshu.com/p/3e2768c8dad4)

---

 ## 2018-12-06

#### bootstrap

- [w3schools bootstrap Form 的形式](https://www.w3schools.com/bootstrap/bootstrap_forms.asp)

Oops, something is wrong


 Spacing Examples
.m-# / m-*-#	margin on all sides	
.mt-# / mt-*-#	margin top	
.mb-# / mb-*-#	margin bottom	
.ml-# / ml-*-#	margin left	
.mr-# / mr-*-#	margin right	
.mx-# / mx-*-#	margin left and right	
.my-# / my-*-#	margin top and bottom	
.p-# / p-*-#	padding on all sides	
.pt-# / pt-*-#	padding top	
.pb-# / pb-*-#	padding bottom	
.pl-# / pl-*-#	padding left	
.pr-# / pr-*-#	padding right	
.py-# / py-*-#	padding top and bottom	
.px-# / px-*-#	padding left and right


---

# 2018-12-10

1. 大樹加法嘗試解題

將任意值轉換成字串最常見的方式有三種：

- `String(value)`: 作為一個函式調用，並非作為建構器
- `''+value`
- `value.toString()`:不能用於 `null` 和 `undefined`


2. 清除共用的陣列

  - 將一陣列的長度設定為 0，會影響到共用的那個陣列。
  - 指定成一個空的陣列則不會影響。

```js
var a1 = [1, 2, 3]
var a2 = a1
a1.length = 0;

result => a1=[]; a2=[]

a1 = [];

result=>
a1=[]
a2 = [1, 2, 3]

```

- 陣列新增或移除
  - `Array.prototype.shift()`: 移除位於索引 0 的元素，並將之回傳。後續元素的索引都會減 1。

  ```js
  var arr = ['a', 'b']
  > arr.shift()
  =>'a'
  > arr
  => ['b']
  ```

- `Array.prototype.unshift(elem1, elem2, ...)`: 將給定的元素接附(prepends)在陣列的前面。它會回傳新的長度。

```js
var arr = ['c', 'd']
arr.unshift('a', 'b')
=> 4

>arr
=>['a', 'b', 'c', 'd']
  ```


- `Array.prototype.pop()`: 移除陣列最後一個元素，並將之回傳。
- `Array.prototype.push(elem1, elem2, ...)`: 將給定的元素加到陣列的末端，它會回傳新的長度。

- `apple()`: 能讓你以破壞性的方式把 arr2 附加到 另一個陣列 arr1 
- `Array.prototype.splice(start, deleteCount, elem1, elem2, ...)`: 從 start 開始，移除 deleteCount 個元素。你以 elem1, elem2, ... 取代了從 start 開始的 deleteCount 個元素。然後回傳被移除的元素。
- `Array.prototype.reverse()`

- `Array.prototype.sort()`


#### 串連切割連接(非破壞性的)

- `Array.prototype.concat(arr1, arr2, ...)`:建立一個新的陣列

- `Array.prototype.slice(begin, end)`: 將陣列元素拷貝到一個新的陣列，從 begin 開始，一直到(但不包含)位於 end 的元素。
  `['a', 'b', 'c', 'd'].slice(1, 3) => ['b', 'c']`

- `Array.prototype.join(separator)`: 將 `toString()` 套用到所有的陣列元素，並將字串 separator 放在它們之間，以此創建出一個新的字串。如果省略了 separator 就會使用 ','
  - join() 會將 undefined 與 null 轉為空字串。
    `[undefined, null].join('#') => '#'`
  - 陣列中的空缺處(holes)也會被轉為空字串。
    `['a',,'b'].join('-')  => 'a--b'`

```js
[3, 4, 5].join('-')
=>'3-4-5'
[3, 4, 5].join()
=>'3,4,5'
[3, 4, 5].join()
=>'345'
```

---

# 2018-12-11

建設主機 網域

- 登入遠端伺服器 
  - `ssh -i ~/.ssh/awsKey.pem ubuntu@ec2-52-196-131-60.ap-northeast-1.compute.amazonaws.com`
  - `ssh -i ~/.ssh/awsKey.pem ubuntu@IP(public)`

- 登入資料庫 `mysql -u root -p`
- 如果已經用 `sudo -i`或`sudo -u`登入 root的話，不需要指定使用者，直接`mysql -p`
  - Enter password: 你剛剛設定的密碼


- `alias`: 設定命令別名
- `ifconfig`: 查看、設定、開關網路介面狀態
  - UP: 這個標誌指出這個介面是開放的，可以發送和接收資料。
  - DOWN: 這個標誌指出這個介面是關閉的，也就是說，此時不能為主機發送和轉發包。
  - LOOPBACK
  - RUNNING: 這表示該介面已經被系統識別。
  - MULTICAST: 這表示介面支援多路傳送位址。
- `route`: 路由是此網跟彼網溝通的紐帶。用於查詢和設定路由表。
- `hostname`: 查看網路連線的主機名稱
- `host`: 查詢某個功能變數或主機名稱所對應的所有 IP 位址
- `nslookup`: 跟 host 基本上一樣。這個命令有兩種模式，互動式、非互動式，如果沒有傳遞任何參數給它、它就會進入互動式
- `tcpdump`: 是網路維運人員搜尋問題的好工具。透過不同的命令列選項來改變抓包狀態。
  - ex. 如果想捕獲 119.75.219.38 接收或發送的 http 的封包，將其結果產生詳細的報告。可以用下列的指令：`tccpdump tcp port 80 and host 119.75.219.38 > net_stat.txt`
-[查看系统 hostname 设置](http://yacca.github.io/2013/08/13/hostname-in-mac-osx.html)


- `apt-get update`
軟體資料庫同步：apt-get update 會根據 /etc/apt/sources.list 中設定到 APT Server 去更新軟體資料庫，在任何更新之前最好都先做這一個動作，讓軟體資料保持在最新的狀況之下。/etc/apt/sources.list 可以用 apt-setup 來設定。


設定 AWS EC2 

1. 設定 key 的權限 `chomd 400 key.pem`
2. `ssh -i "key.pem" ubuntu@ec2-54-238-243-3.ap-northeast-1.compute.amazonaws.com
`
參考資料：[How To Install Linux, Apache, MySQL, PHP (LAMP) stack on Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu-16-04)
- 設定 `sudo vim /etc/apache2/apache2.conf`
- `ServerName server_domain_or_IP`
E45: 'readonly' option is set (add ! to override)
- 原因：指令前面沒輸入 sudo 
- 權限問題無法編輯文件：輸入 `qa!` 指令離開


- __Ubuntu 下 phpMyAdmin 的 404 Not Found 頁面__
1. 方法1:(用這個解決的)
  - _The requested URL /phpmyadmin was not found on this server._
  - 在終端上運行此命令，`sudo ln -s /usr/share/phpmyadmin /var/www/html/phpmyadmin`，並刷新您的phpmyadmin頁面

2. 方法2:

```
# link configure file to apache
$ sudo ln -s /etc/phpmyadmin/apache.conf /etc/apache2/conf.d/phpmyadmin.conf
# restart apache
$ sudo /etc/init.d/apache2 restart
```

參考資料：
[解決 Ubuntu 下 phpMyAdmin 的 404 Not Found 頁面 - kuoe0's dots](https://blog.kuoe0.tw/posts/2012/08/23/slove-phpmyadmin-404-not-found-in-ubuntu/)
[鏈結檔案（ln 指令](https://www.ibm.com/support/knowledgecenter/zh-tw/ssw_aix_71/com.ibm.aix.osdevice/cmd_linkfiles.htm)
延伸資料：[ubuntu phpmyadmin](https://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=320994#forumpost320994)



- 允許使用 PHP Short tag，輸入 `sudo vim /etc/php/7.2/apache2/php.ini`
  - 如果用`vim`，按`/`輸入關鍵字，按`n`查找下一個，`找到 short_open_tag = 改成 ON
- 離開 vim 編輯器(權限問題無法編輯文件)：輸入 `qa!` 指令強制離開


參考資料：[大家來學VIM（一個歷久彌新的編輯器）[六]](http://www.study-area.org/tips/vim/Vim-6.html)
[阿旺的 Linux 開竅手冊](http://wanggen.myweb.hinet.net/index.html)
[Linux常用指令整理](http://c8631506.blogspot.com/2015/04/linux_12.html)

CLI mysql 

- 登入: `mysql -u root -p` 然後輸入密碼。
- `show databases;`
- `show status;`
- 離開: `exit`、`quit`
- 注意結尾分號




設定留言參考資料：
[How To Install Linux, Apache, MySQL, PHP (LAMP) stack on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04)


- 設定使用 Apache 內置.htaccess 身份驗證和授權功能

參考資料:[45 How To Install and Secure phpMyAdmin on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-on-ubuntu-18-04)

1. 編輯已放置在Apache配置目錄中的鏈接文件：`sudo vim /etc/apache2/conf-available/phpmyadmin.conf`

2. 添加這個 ` AllowOverride All`

```
<Directory /usr/share/phpmyadmin>
  Options FollowSymLinks
  DirectoryIndex index.php
  AllowOverride All
    ```
3. 重新啟動 `sudo systemctl restart apache2`
4. 打開編輯 `sudo vim /usr/share/phpmyadmin/.htaccess`
5. 添加這些
```
AuthType Basic
AuthName "Restricted Files"
AuthUserFile /etc/phpmyadmin/.htpasswd
Require valid-user
```

6. 輸入你想要的帳號，然後會讓你輸入及確認密碼： `sudo htpasswd -c /etc/phpmyadmin/.htpasswd your_username`
7. 完成！測試！`https://domain_name_or_IP/phpmyadmin`


[How to Install a LAMP Stack on Ubuntu 18.04](https://www.linode.com/docs/web-servers/lamp/install-lamp-stack-on-ubuntu-18-04/#troubleshooting)
[How to setup Linux, Apache, MySQL, PHP (LAMP) Stack on Ubuntu 16.04](https://medium.com/techkylabs/how-to-install-linux-apache-mysql-php-lamp-on-ubuntu-16-04-f82a60b0d40d)

- AWS EC2 設置固定IP地址
  - 進入EC2控制面板，進入左側下方的“Elastic IPs”，
  - 點擊“Allocate New Address”申請一個固定的IP地址。
  - 選中IP地址，點擊“Associate Address”，然後選擇要使用的EC2主機即可。
  - 注意：不要申請IP後閒置（不綁定到雲主機），可能被收取額外費用。

參考資料：
[(AWS EC2) Service for EC2 指定固定IP及釋放IP](http://jyeh-blog.logdown.com/posts/712216-aws-ec2-service-for-ec2-specifying-a-fixed-ip)
[Amazon EC2防止被扣费的方法](https://www.59php.com/blog/43.html)



[ubuntu 默認防火牆安裝、啟用、查看狀態ufw](https://blog.csdn.net/m0_37864814/article/details/82961996)



- 設定別名連線：
  - 指令列都要打長長的一串，ip 還可能忘記，所以想到用別名的方式去改善
> [How to setup SSH config ：使用 SSH 設定檔簡化指令與連線網址](https://medium.com/@awonwon/how-to-setup-ssh-config-%E4%BD%BF%E7%94%A8-ssh-%E8%A8%AD%E5%AE%9A%E6%AA%94-74ad46f99818)

  - 如果對`ssh_config `配置上有問題，可以看這篇
> [ssh_config（5）：OpenSSH SSH客戶端配置文件 - Linux手冊頁](https://linux.die.net/man/5/ssh_config)
  - 重點大概是，才知道其中的差別
    - obtains configuration data from the following sources in the following order:
    1. command-line options
    2. user's configuration file (~/.ssh/config)
    3. system-wide configuration file (/etc/ssh/ssh_config)
    ~/.ssh/config


補充資料：[20. 增進 SSH 使用效率 - ssh_config](https://chusiang.gitbooks.io/working-on-gnu-linux/content/20.ssh_config.html)
[Using an SSH Config File - Media Temple](https://mediatemple.net/community/products/grid/204644730/using-an-ssh-config-file)

不一樣的用法：[SSH 公開金鑰認證：不用打密碼登入 Linux 設定教學，安全又方便 - G. T. Wang](https://blog.gtwang.org/linux/linux-ssh-public-key-authentication/)
 ssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@52.194.8.58



#### [用FileZilla 連接Amazon 的aws的主機](https://blog.csdn.net/michael1112/article/details/52537961)
- 1. 打開FileZilla 的"編輯" -> "設置" 對話框，在左邊的“選擇頁面” 選擇“SFTP”， 右邊點擊“添加密鑰文件...” 按鈕，導入Amazon給的密鑰文件。
- 2. 打開“文件”-> “站點管理器” ， 點擊左邊的“新站點”按鈕， 在右邊“常規”標籤中填入主機信息（即AWS Console中的Public DNS）,
  - "協議"中選"SFTP - SSH FileTransfer Protocol" ,
  - “登錄類型” 選“交互式”
  - “用戶” 中輸入用戶名(注意不能用默認的匿名用戶)
3. 點“連接”。完成。




### VPS 設定相關

[php.ini 中文翻譯](http://mic1491.pixnet.net/blog/post/30159855-php.ini%E8%A8%AD%E5%AE%9A%E6%AA%94%E4%B8%AD%E6%96%87%E8%AA%AA%E6%98%8E)
- 回到根目錄 `cd ~`
- 去網頁的目錄 `cd /var/www/html`
- 直接查看 PHP 錯誤訊息 `vim /var/log/apache2/error.log`。

- 直接查看 PHP 設定檔 `vim /etc/php/7.2/cli/php.ini` 
  - 在這裡改了 timezone 跟 include_path 沒有效果
  - 改了這個 `/etc/php/7.2/apache2/php.ini` 之後，查看 info.php 才有生效

- Loaded Configuration File	`/etc/php/7.2/apache2/php.ini`
- Scan this dir for additional .ini files	`/etc/php/7.2/apache2/conf.d`

- 顯示 MySQL 伺服器中資料庫資訊：`mysqlshow -h localhost -u root -p`
  - `-h`: 指定資料庫伺服器的主機名稱或 IP
  - `-u`: 連接資料庫伺服器的使用者名稱
  - `-p`: 連接資料庫伺服器的使用者密碼
  - `--count`: 顯示每個資料表中的資料的行數: `mysqlshow -h localhost -u root -p --count`
  - `-k`: 顯示資料表的索引
  - `-t`: 顯示資料表的型態

- `sudo service apache2 restart`
- 


在normal模式下按下 
/ 即可进入查找模式
输入要查找的字符串并按下回车。 
Vim会跳转到第一个匹配。 
按下 n 查找下一个，
按下 N 查找上一个。 
Vim查找支持正则表达式，
例如 /vim$ 匹配行尾的 "vim" 。2016年8月8日

https://harttle.land/2016/08/08/vim-search-in-file.html


## 2018-12-14

- 回到上一個動作`u`
[vim 指令](http://www2.nsysu.edu.tw/csmlab/unix/vi_command.htm)




- [在Mac設定Apache、PHP、MySQL](https://medium.com/@hyWang/%E5%9C%A8mac%E8%A8%AD%E5%AE%9Aapache-php-mysql-694430084d3a)
  - 到 it work! 之後就不能用了。有空再研究。

[英文版 完全照著做了ＸＤ](https://websitebeaver.com/set-up-localhost-on-macos-high-sierra-apache-mysql-and-php-7-with-sslhttps)


[stmt 教學](https://websitebeaver.com/php-pdo-prepared-statements-to-prevent-sql-injection)



- 查看 mysql 的配置狀態：`php -r 'phpinfo();' | grep -i mysqli` 



- 錯誤排除
- 在 PHP 7.2 之後，count method 如果傳入 NULL 參數就會噴 `Warning：
count(): Parameter must be an array or an object that implements Countable`
目前 phpMyAdmin 尚未修正此問題，因此需要手動調整。
[Install phpMyAdmin on Ubuntu](https://blog.johnsonlu.org/install-phpmyadmin-on-ubuntu/)
  其他參考資料：
  - [phpmyadmin - count(): Parameter must be an array or an object that implements Countable](https://stackoverflow.com/questions/48001569/phpmyadmin-count-parameter-must-be-an-array-or-an-object-that-implements-co)
  - [Problem with phpMyAdmin and PHP 7.2: “Warning in ./libraries/sql.lib.php#613 count(): Parameter must be an array or an object that implements Countable”](https://devanswers.co/problem-php-7-2-phpmyadmin-warning-in-librariessql-count/)







  21、檢視網路狀態命令
# netstat -antp #檢視所有網路連線
# netstat -lntp #只檢視監聽的埠資訊
# lsof -p pid #檢視程序開啟的檔案控制代碼
# lsof -i:80 #檢視埠被哪個程序佔用


- 找出 IP 位址：`ifconfig |grep -o '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}'`
  - `-o` 只顯示匹配字元


- 檢視伺服器IP連線數: `netstat -tun | awk '{print $5}' | cut -d: -f1 |sort | uniq -c | sort -n`
  - `-tun`：-tu 是顯示 tcp 和 udp 連線，n 是以 IP 地址顯示
  - `cut -d：-f1`：cut 是一個選擇性顯示一行的內容命令，-d 指定：為分隔符，-f1 顯示分隔符後的第一個欄位。
  - `uniq -c`：報告或刪除文中的重複行，-c 在輸出行前面加上出現的次數
  - `sort -n`：根據不同型別進行排序，預設排序是升序，-r 引數改為降序，-n 是根據數值的大小進行排序


- 返回此前目錄:只需要輸入 `cd –` 即可返回此前目錄。



'strict' => false,
into config/database.php within mysql array

- 最後在 `add_comments.php` 裡面 `var_dump($variable)`所有的變數，發現 `if($stmt->execute())` 的結果是 false，然後最後 `$conn->error` 印出 `General error: 1364 Field 'user_ID' doesn't have a default value`，發現 user_id 是 0，但這個也蠻奇怪的，在自己的伺服器跟mentor的伺服器都沒遇到，或許有設定配置的問題。最後在 phpmyadmin 直接設定預測值為 null，就正常運作了。
[4個MySQL 資料庫基本除錯技巧](https://www.qa-knowhow.com/?p=4631)


# 2018-12-15

設定哪些IP可以或不可以登入這台電腦

在/etc資料夾下有兩個檔案：hosts.allow 和 hosts.deny，前者是用來設定哪些IP可以登入這台電腦，後者則是用來設定哪些IP不能登入這台電腦。
我們可以在終端機輸入以下的指令：
[Ubuntu - SSH 的安裝與設定 和 設定SSH遠端連線功能](https://sites.google.com/site/linuxcooltea/home/ubuntu-she-dingssh-yuan-duan-lian-xian-gong-neng)


2.錯誤原因：
（1）檢查數據表的各個字段拼寫是否正確；
（2）檢查插入的變量的值，使用語句var_dump($xxx)，查看此變量值格式、數值是否正確；
（3）檢查數據表的NULL字段，使用命令desc table_name，當某一個或多個字段屬性為not null時，而卻沒有數據插入，則會導致插入數據錯誤。（這是本案例出現錯誤的原因）



- PDO 很好的教學文：[Re-introducing PDO – the Right Way to Access Databases in PHP](https://www.sitepoint.com/re-introducing-pdo-the-right-way-to-access-databases-in-php/)
[PHP Data Objects (PDO) 簡易使用說明(1)-啟用PDO讀取資料庫資料](https://pjchender.blogspot.com/2015/08/php-data-objects-pdo.html)




DSN （數據源名稱） 編輯
Data Source Name (DSN)的PDO命名慣例為：PDO驅動程序的名稱，後面為一個冒號，再後面是可選的驅動程序連接數據庫變量信息，如主機名、端口和數據庫名。



1. CREATE DATABASE your_database;
2. USE your_database




# __Linux__ 指令：

## `id`

- `id -u`: 查詢自己是否為 root，如果是 0 就是 root。
- `-u`: 顯示使用者 ID。
- `-F`、`-un`: 顯示實際的帳號名稱。

## `sudo`

- `sudo -i`: login 運行登錄 shell 作為目標用戶;也可以指定命令。用 `logout` 登出 root。
- `sudo -s`: shell 運行 shell 作為目標用戶;也可以指定命令。用 `exit` 離開 root 權限。

## `who`

- `who`: 列出所有使用者及簡單的資訊。

```js
enter3017sky console  Dec 12 13:18
enter3017sky ttys001  Dec 16 00:01
enter3017sky ttys002  Dec 17 12:05
  ```

- `who am i`: 列出使用者及簡單的資訊。
  - ex.`enter3017sky ttys001  Dec 16 00:01`

- `whoami`: 列出使用者名稱。
  - `enter3017sky`
- `w`: 列出所有使用者以及更詳細的資訊。

```
15:19  up 5 days,  2:01, 3 users, load averages: 2.85 3.25 3.81
USER     TTY      FROM              LOGIN@  IDLE WHAT
enter3017sky console  -                三13   5days -
enter3017sky s001     -                日00       - w
enter3017sky s002     -                12:05      12 ssh ec2
```

### `nslookup`

- 這是用來查詢或反查詢 DNS 的指令。
  - ex. `nslookup google.com`




### date

- 查看日期的指令。

### cal

- 這是用來叫出日曆的指令。



# 2018-12-17

## _錯誤訊息：ERROR 1364 (HY000): Field 'xxx' doesn't have a default value_

1. 初次排除：雲端虛擬主機部署完成之後，首先當然是放些東西確認看看。後來發現留言板編輯、刪除、更新都正常。但是新增留言就是 sql fail，最後在 `add_comments.php` 裡面用 `var_dump($variable)`印出有嫌疑的變數，發現 `if($stmt->execute())` 的結果是 false，然後最後 `$conn->error` 印出 _General error: 1364 Field 'user_ID' doesn't have a default value_，發現 user_id 沒有用到，phpmyadmin 裡面與沒有設定預設值，但這個也蠻奇怪的，在自己的伺服器跟mentor 的伺服器都沒遇到，或許有設定配置的問題。最後在 phpmyadmin 直接設定預測值為 null，就正常運作了。

2. 第二次解決：後來在 CLI 練習指令的時候，又發現了這個問題 `insert into`時，如果某個值沒放輸入又沒預設值，就會跳 ERROR。然後找到了，原來 `sql_mode` 是嚴格模式的關係。

### 取消mysql5.7的 strict mode 模式：

1. SSH 連線到伺服器的 root，輸入`sudo vim /etc/mysql/conf.d/disable_strict_mode.cnf`，以新增並建立一個 disable_strict_mode.cnf 檔案，
  
2. 輸入

```
[mysqld]
sql_mode=IGNORE_SPACE,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
```

3. 輸入指令重新啟用 mysql :`sudo service mysql restart`

>為了確認strict mode模式是不是已經被關閉了，可以在 phpMyAdmin 的 sql 中輸入 SELECT @@GLOBAL.sql_mode 進行測試
> 如果顯示 IGNORE_SPACE,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FO 則表示 strict mode 模式已經被關閉。

參考資料：[關閉Ubuntu預設mysql5.7版的strict mode設定方法(嚴格模式)](https://www.facebook.com/notes/%E5%BE%90%E5%98%89%E8%A3%95/%E9%97%9C%E9%96%89ubuntu%E9%A0%90%E8%A8%ADmysql57%E7%89%88%E7%9A%84strict-mode%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95%E5%9A%B4%E6%A0%BC%E6%A8%A1%E5%BC%8F/10154547170683609/)
- [MySQL sql_mode 说明（及处理一起 sql_mode 引发的问题）](http://seanlook.com/2016/04/22/mysql-sql-mode-troubleshooting/)
- [MySQL Server 的 SQL Modes](https://xyz.cinc.biz/2013/08/mysql-server-sql-modes.html)




- MySQL 錯誤排除
_ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)_
_ERROR 2003 (HY000): Can't connect to MySQL server on '127.0.0.1' (111)_

- 參考資料：[ERROR 2003 (HY000): Can't connect to MySQL server on '127.0.0.1' (111)](https://stackoverflow.com/a/16164426/10680064)




# 2018-12-18

> 參考資料：[MySQL :: MySQL 8.0 Reference Manual :: 3.6.9 Using AUTO_INCREMENT](https://dev.mysql.com/doc/refman/8.0/en/example-auto-increment.html)
[SQL CREATE TABLE Statement](https://www.w3schools.com/sql/sql_create_table.asp)

[mysql 常用指令](http://note.drx.tw/2012/12/mysql-syntax.html)

- 在 CLI 建立資料表

1. 選擇在哪一個資料庫建立：`use your_database_name`
2. 就可以輸入指令了

  - 不分大小寫
  - 型態: `INT`, `TEXT`, `VARCHAR`
  - 自動排序: `auto_increment`
  - not null: 不要有預設值是 `NULL`
  - PRIMARY KEY ()

```PHP
CREATE TABLE jobs(
    id INT auto_increment,
    title VARCHAR(64) not null,
    description text not null,
    salary varchar(128) not null,
    link varchar(512) not null,
    PRIMARY KEY (id)
    );

```

![image](https://ppt.cc/fT8hwx@.png)

 - 列出資料表欄位資訊： `describe your_table_name`

![image](https://ppt.cc/f9FJYx@.png)
- 新增單筆資料到 jobs 表格
  - `INSERT INTO jobs VALUES(null, '工程師', '碼農', '40k~???k', 'http://google.com');`
  - `INSERT INTO jobs (title, description, salary, link) VALUES ('工程師', '碼農', '40k~???k', 'http://google.com');`



### 其他範例

- 刪除 1979 年出版的書籍：
  - `DELETE FROM books WHERE pub_year = 1979;`
- 把 _roots_ 的出版年改為 19483：
  - `UPDATE books SET pub_year=1983 WHERE title='roots';`
- 查詢 80 年代出版的書籍：
  - `SELECT * FROM books WHERE pub_year>1979 AND pub_year<1990;`
- 指定回傳需要的欄位：
  - `SELECT title, pub_year FROM books WHERE pub_year>1979 AND pub_year<1990;`
- 查詢多張表格的匯集資訊。例如把 book 和 author 兩張表合併，可以看到每本書是誰寫的：
  - `SELECT authors.name, books.title, FROM books, authors WHERE authors.authorid = books.authorid;`
- 把表格名稱縮短：
  `SELECT a.name, b,title FROM books b, authors a WHERE a.authorid = b.authorid;`
  `SELECT a.name, b,title FROM books AS b, authors AS a WHERE a.authorid = b.authorid;`


```


### 搜尋列變成 Google Search [參考資料](https://www.askdavetaylor.com/how_can_i_add_a_google_search_box_to_my_web_site/)

```html
<form class="form-inline my-2 my-lg-0" method="get" action="http://www.google.com/search">
    <input class="form-control mr-sm-2" type="search" placeholder="Google Search" aria-label="Search" maxlength="255" name="q" value="">
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
</form>

```


# 2018-12-19

[php rowCount()](http://php.net/manual/en/pdostatement.rowcount.php)

# 2018-12-20




- 呈現 html 換行問題
[php換行 - str_replace()](http://websolstore.com/how-to-use-nl2br-and-its-reverse-br2nl-in-php/)

```php
$post_content = str_replace("\r\n"，"<br/>"，$post_content);
$post_content = str_replace("<br/>"，"\n"，$post_content);
```

# 2018-12-21

- _待辦事項_:week7 的 todo-list 增加功能可參考[MTR02 week8](https://youtu.be/QiCm9JE43KM?t=431)。

- 將 AWS EC2 的 IP 指定到我的網域，解決 phpmyadmin 網
址只能打 IP (不確定是不是正解): `sudo vim /etc/hosts`
參考資料: [hosts檔案](https://zh.wikipedia.org/wiki/Hosts%E6%96%87%E4%BB%B6)


- week8
- transaction 補充 [MTR02-week9](https://youtu.be/9hZ3JoprEAI?t=2691)：自己判斷 query 有沒有成功，才 rollback 或 commit

- `dig +trace your_url`: 查詢 DNS 階層

參考資料：[第十九章、主機名稱控制者： DNS 伺服器](http://linux.vbird.org/linux_server/0350dns.php)

# 2018-12-24

- PDO 不錯的範例 [UPDATE query using PDO](https://phpdelusions.net/pdo_examples/update)

- [php 開啟檔案中文亂碼 設定教學](https://tw.saowen.com/a/08dd5a6e992125cf4f22e12a09ac89a51b0d6e4390d1ee7c27eb8c0373acd832)

> 找到 php.ini 編輯

# 2018-12-26

## 再次相遇 ERROR 2002 (HY000)

> ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)

1.

- 看系統日誌([參考這篇](http://chuhw.pixnet.net/blog/post/225951095-ubuntu-%E4%B8%8A%E5%88%A9%E7%94%A8-netstat-%E6%9F%A5%E8%A9%A2%E6%9F%90%E5%80%8B-port-%E8%A2%AB%E5%93%AA%E5%80%8B%E6%9C%8D%E5%8B%99))：`sudo vim /var/log/syslog` 之後，才發現問題是出現想解決「伺服器開啟含有中文字的檔案(.js, .md)會亂碼」的問題時，在 `vim /etc/mysql/my.cnf` 加上的參數 `default-character-set=utf8`。
  - _[ERROR] unknown variable 'default-character-set=utf8'_
  
![image](https://ppt.cc/fJ0ATx@.png)

- 然後就解決了第一個問題：mysql 沒反應

  - 「 _Job for mysql.service failed because the control process exited with error code.
See "systemctl status mysql.service" and "journalctl -xe" for details._ 」
  ![image](https://ppt.cc/fMwyPx@.png)

2.


- 過程中參考了很多處理的方式，而在搞不清楚設定的幹嘛用的情況，先恢復原狀吧！
- 最後在 `vim /etc/mysql/my.cnf` 裡面關於 [mysqld] 的配置，恢復配置後解決最後一個 ERROR 2002 的問題

```s
### note
[mysqld]
# 會出現錯誤
# bind-address = ec2_public_IP

# 最後註解下行就解決了 ERROR 2002
# socket=/var/lib/mysql/mysql.sock
```

---
參考資料
- [利用 rsyslog + mysql + loganalyzer 做好日誌管理 (下)](http://cyrilwang.blogspot.com/2012/03/rsyslog-mysql-loganalyzer_29.html)
- [Mysql 系統訊息集中監控(syslog, syslog-ng)](http://seansylo.blogspot.com/2010/06/mysql-syslog-syslog-ng.html)
http://www.npartnertech.com/download/tech/NPartner-MySQL-Syslog-TW-005.pdf
---


## 用以下的方式啟動、停止、重啟 ubuntu mysql 會完整的訊息。

- On Linux start/stop/restart from the command line:

```s
/etc/init.d/mysqld start
/etc/init.d/mysqld stop
/etc/init.d/mysqld restart
# or
/etc/init.d/mysql start
/etc/init.d/mysql stop
/etc/init.d/mysql restart
# 像這樣
[ ok ] Starting mysql (via systemctl): mysql.service.
[ ok ] Stopping mysql (via systemctl): mysql.service.
[ ok ] Restarting mysql (via systemctl): mysql.service.
```

- `systemctl start|stop|restart mysql.service` 這種類型的就不會顯示

參考資料：
- [Restart Start Stop MySQL Server from Command Line, macOS, Linux](https://coolestguidesontheplanet.com/start-stop-mysql-from-the-command-line-terminal-osx-linux/)
- [MySQL :: MySQL 5.7 Reference Manual :: 2.5.10 Managing MySQL Server with systemd](https://dev.mysql.com/doc/refman/5.7/en/using-systemd.html)

---

## 更改 ubuntu 系統時間、 mysql error.log 時間

- 執行 `sudo vim /var/log/syslog` 查看系統 log 的時候，發現時間是錯誤的。
- 輸入 `date -R` 確認系統現在的時間
- 參考 [Ubuntu 16.04 改變 Timezone 時區設定](https://www.phpini.com/linux/ubuntu-16-04-change-timezone-setting)
 1. 更改成台北時間： `timedatectl set-timezone Asia/Taipei`
 2. 用 timedatectl 指令檢查時區是否設定正確： `timedatectl`
 3. `date` 再確認一次

- 參考[MySQL的error.log時間與系統時間不一致](https://www.jianshu.com/p/2120e38d91db) 設定

- [log-error 記錄mysql錯誤](https://disp.cc/b/11-5kfe)

---

## 查看 log 的方式

- `tail -(筆數, 數字) 檔案名稱`
範例：查看 mysql 最後十筆錯誤訊息`tail -10 /etc/log/mysql/error.log`

- You can view log files that are compressed.
 `zcat /var/log/mysql/error.1.gz | more`



## 
[再見亂碼：5分鐘讀懂MySQL字符集設置](https://www.cnblogs.com/chyingp/p/mysql-character-set-collation.html)

- 登入 ubuntu 輸入 mysql -u root -p 輸入密碼登入 mysql，\s 查看狀態。

```js
mysql  Ver 14.14 Distrib 5.7.24, for Linux (x86_64) using  EditLine wrapper

Connection id:		4
Current database:
Current user:		root@localhost
SSL:			Not in use
Current pager:		stdout
Using outfile:		''
Using delimiter:	;
Server version:		5.7.24-0ubuntu0.18.04.1 (Ubuntu)
Protocol version:	10
Connection:		Localhost via UNIX socket
Server characterset:	utf8
Db     characterset:	utf8
Client characterset:	utf8
Conn.  characterset:	utf8
UNIX socket:		/var/run/mysqld/mysqld.sock
Uptime:			5 min 8 sec
```

- `sudo vim /etc/mysql/,y.cnf` 然後修改設定檔。

```js
[mysqld]
collation-server = utf8_unicode_ci
init-connect='SET NAMES utf8'
character-set-server = utf8
```


# 2019-01-06


## php.ini include_path

在寫 PHP 時，在執行 include、include_once、require、require_once 引入檔案時，要怎麼知道是如何運作的。

- `echo get_include_path();`: 可以看到設定的路徑
- `locate php.ini` 來查找設定檔路徑，在檔案裡面找到 `include_path="...."` 就可以設定路徑。
    - ex. `include_path="/var/www/html:/usr/share/php:."`
    - 檔案查找順序會是 `/var/www/html` 找不到，往 `/usr/share/php`，依然找不到就往 . (當前目錄)找

`include "blog/admin/add.php";` 就是 `/var/www/html/blog/admin/add.php`

```
. : 代表目前的目錄
.. :上一層目錄
/ : 代表根目錄
```

補充資料: [PHP - Failed to open stream : No such file or directory](https://stackoverflow.com/questions/36577020/php-failed-to-open-stream-no-such-file-or-directory)

---

## 

參考資料: [在PHP中isset、empty、is_null的使用差別](https://ithelp.ithome.com.tw/articles/10156786)


---

## PHP Exceptions 種類與使用情境說明

### 主要 Exception

在 PHP 5，Exception 是最終端的主要類別，所有 PHP exception 類別都由此繼承出來。

### Throwable

- PHP7 以後，Throwable 是最上層所有可以被 throw 關鍵字丟出的 interface，它不能直接 new，也不能直接用 class implement，一定要另外從 Error 或 Exception 繼承出來才能使用。使用 Throwable 的好處是可以連同一般語法錯誤也當作 Exception 進行錯誤處理與顯示除錯訊息。

![image](https://windspeaker.s3.amazonaws.com/post/asika/2018/03/19/c66c98c187d8823cc3b5cd1e601c87de.jpg)

在 PHP5 中，可以用兩層 catch 來確保同時運作在 5 與 7 中所有錯誤都被捕獲:
```php

try {
    // ...
} catch (Exception $e) {
    // ...
} catch (Throwable $t) {
    // ...
}
Throwable 與 Exception 的
```

![image](https://windspeaker.s3.amazonaws.com/post/asika/2018/03/20/8281e3673909c6794b21718b795d287a.jpg)

參考資料: [PHP Exceptions 種類與使用情境說明](http://asika.windspeaker.co/post/3503-php-exceptions)

## 2019-01-08

[GitHub秘笈](https://github.com/tiimgreen/github-cheat-sheet/blob/master/README.zh-tw.md)

- 建立 Blog 之 MySQL 的應用[PHP & MYSQL Blog system](https://stackoverflow.com/questions/41169708/php-mysql-blog-system)

### PHP 建立陣列

- 陣列的鍵值(key): 字串型態、數字型態、字串及數值型態
- `array()`

```php
$vegetables = array(
            'conn' => 'yellow',
            'beet' => 'red',
            'carrot' => 'orange');
$dinner = array(
            0 => 'Sweet Corn and Asparagus.',
            1 => 'Lemon Chicken',
            2 => 'Braised Bamboo Fungus');
```

- 另外一個寫法，使用中括號`[]`

```php
$vegetables = ['conn' => 'yellow', 'beet' => 'red', 'carrot' => 'orange'];
$dinner = [0 => 'Sweet Corn and Asparagus.', 1 => 'Lemon Chicken', 2 => 'Braised Bamboo Fungus'];
$computers = ['trs-80' => 'Radio Shack', 2600 => 'Atrai']
```

- 新增陣列 `[]`，PHP 會在 鍵值(key)自動遞增 index

```php
// 新增兩個元素到 $lunch
// 這行會設定 $lunch[0] = 'Chicken';
$lunch[] = 'Chicken';

// 這行會設定 $lunch[1]
$lunch[] = 'Flank Skin with Spiced Flavor';

```


### 存取表單參數（多值欄位）

- 一個表單的欄位如果可以有多個值的話，必須要在欄位名稱後面加上 []。加了 [] 是告訴 PHP，將此多值欄位變成陣列。

```php
<div class='form-check'>
    <input name='category_id[]' class='form-check-input' type='checkbox' value='$id' id='check_$id' $is_checked/>
    <label class='form-check-label' for='check_$id'>$name</label>
</div>";
```




# 2019-01-09

foreach
http://www.jollen.org/php/jollen_php_book_31_foreach.html


[[筆記] PHP 字串和陣列的取代與切開處理](https://pjchender.blogspot.com/2015/05/php.html)


# 2019-01-16

> PHP 大師 - 寫出頂尖的程式碼

當我們呼叫 `PDO::prepare()`，這個函式應該返回一個 PDOStatement 物件。然而要注意，如果準備過程失敗，它可能返回 false 或丟出 PDOException。因此，我們的程式碼應該包裹成這樣：

藉由檢查 $stmt 是否為 false，我們就涵蓋了 prepare() 呼叫返回 false 的情況。此外，如果再準備、執行、取得(fetch)過程中的任何階段發生異常，它將被捕抓並處理。

我們把 execute() 呼叫的結果指定給 $result，使我們可以檢查它是 true 或 false。如果是 true，我們繼續並取得資料，獲做我們下一步要做的事情。

```php
    try {
        $stmt = $pdo->prepare($sql);
        if($stmt) { // 處理準備階段的問題
            // 執行查詢
            $result = $stmt->execute();
            if($result) { // 處理執行時的問題
                $row = $stmt->fetch(PDO::FETCH_ASSOC);
            } else {
                $error = $stmt->errorInfo();
                echo "Query failed with message: " . $error[2];
            }
        }
    } catch (\Throwable $th) {
        echo "<br/>";
        echo '<pre>';
        echo 'PDO Exception Caught: ';
        echo "Error with the database:<br>";
        echo 'SQL Query:'.$sql.'<br>';
        echo "ERROR:".$th->getMessage().'<br>';
        echo "Code:".$th->getCode().'<br>';
        echo "File:".$th->getFile().'<br>';
        echo "Line:".$th->getLine().'<br>';
        echo "Trace:".$th->getTraceAsString().'<br>';
        throw $th;
        echo '</pre>';
    }

```


- 用 GET 方法取得文章 id: 當沒有文章的 id 時，如果輸入的是數字(db int 的關係)，這樣不會產生錯誤。

```php
$stmt = $pdo->prepare($sql);
$result = $stmt->execute();
if($result) {
    $row = $stmt->fetch(PDO::FETCH_ASSOC);
}
```

- 用 GET 方法取得文章 id: `$result = $stmt->rowCount();` 返回 query 成功的筆數。

```php
$stmt = $pdo->prepare($sql);
$result = $stmt->rowCount();
if($result) {
    $row = $stmt->fetch(PDO::FETCH_ASSOC);
}


$result = $stmt->rowCount();
echo "<pre>";
var_dump($result);
print_r($result);
echo "</pre>";
```

 ```php
$id = $_GET['id'];
$sql = "SELECT A.title, A.content, A.created_at, A.draft FROM articles A WHERE A.id = $id";
try {
    $stmt = $pdo->prepare($sql);
    if($stmt) {
        $result = $stmt->execute();
        // $result = $stmt->rowCount();
        if($result) {
            $row = $stmt->fetch(PDO::FETCH_ASSOC);
        }
    }
```


#### 消毒，轉換 html 的字元。

- htmlentities 轉換所有的 html 標記(編碼沒設定好會出現亂碼)
- htmlspecialchars 只格式化& ' " < 和 > 這幾個特殊符號


[“Notice: Undefined variable”, “Notice: Undefined index”, and “Notice: Undefined offset” using PHP](https://stackoverflow.com/questions/4261133/notice-undefined-variable-notice-undefined-index-and-notice-undefined)

用户名和邮箱必须唯一，如果填入重复的用户名或者邮箱就会出错
報錯：SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'admin' for key 'username'


### 設定 ubuntu 權限，

[Forbidden 403 for js file on localhost?
](https://webmasters.stackexchange.com/questions/69692/forbidden-403-for-js-file-on-localhost)
Folder and File Permissions and Ownership

- `chmod -R 775 /home/$USER/public_html`
[](https://www.lifewire.com/403-forbidden-error-explained-2617989)


- 幫 code highlight[Prism](https://prismjs.com/index.html)



```php

$result = str_ireplace($q, "<mark>$q</mark>", $content); // 把被搜尋的字串，用 <mark> 包起來。
stripos(): 關鍵字在字串中第一次出現的位置 
stripos($content, $q)

mb_strlen(): 字串的總長度
mb_strlen($content, 'utf-8')

strchr(): 擷取目標字串之後的字
$test1 = strchr($replace_content, "<mark>$q</mark>")

```

[PHP 設定 session 過期的時間](https://blog.longwin.com.tw/2008/10/php-set-session-expire-time-2008/)

```php

$a = 'ste2e';
$b = null;
$c = [];

$array =['id'=>123, 'test' => '12d1d'];

var_dump( check_var( $array['id'] ) ); // 输出 int(123) 
var_dump( check_var( $array['code'] ) ); // 输出 bool(false) 
var_dump( check_var( $array, 'not set') ); // 输出 string(7) "not set" 

var_dump(check_var($a));
var_dump(check_var($b));
var_dump(check_var($c));

function check_var( $var, $default = ''){
    return( (isset($var) && !empty($var )) ? $var : (!empty($default) ? $default : false) );
}

```



# 2019-01-20


[gulp: Did you forget to signal async completion?处理](https://blog.csdn.net/weixin_40817115/article/details/81079507)

```js
var gulp = require('gulp');

gulp.task('hello', function (done) {
    console.log('Hello, World!');
    done();
});

gulp.task('testGulp', done => {
    console.log('Hello World!');
    done();
  });

```


# 2019-01-25

- 同步異步之來杯美式！愛喝咖啡的我，每天都會在超商買上幾杯咖啡，有時候你跟店員說了「我要一杯熱美式。」店員拿起咖啡杯，按下確認鍵，咖啡機運作了。在咖啡機運作的過程，通常也會有其他的客人在排隊了等結帳。

JavaScript 是單線程的程式語言

假如店員看著咖啡機，等機器滴完，然後裝上蓋子遞給我，才繼續幫下一個客人結帳，這就是同步（synchronous）的過程，但通常會有更多的客人接著來排隊，而這個情況就會造阻塞。

那異步（asynchronous）呢？就像你平常買東西的時候那樣，你提出需求後，店員幫你處理，在你等待的過程中，他服務下一個客人，然後再接著服務下一組客人，直到櫃台前面沒有排隊的客人，才會換你。

誒等等，是不是哪邊怪怪的？必須等待所有的人？有的時候會遇到這種店員，可能只有他一個人，而排隊的人又很多的，店員自己本身感受到壓力，就一直結帳下去了。然後你的咖啡，就會先擺在任務佇列(Task Queue)中，直到沒有排隊的人了，才換你。

哦，咖啡機跑的過程，就像 setTimeout 那樣，這是 Web 提供的 APIS


```js
console.log(1)
setTimeout(function() {
    console.log(2)
}, 15000)
console.log(3)
```


---

- Gulp 模板，輸入 `git clone https://github.com/jh3y/gulp-boilerplate.git` 下載到電腦裡面，可以很簡單的使用，`gulp`輸入指令，在瀏覽器會跳出，做任何更改直接顯示在瀏覽器上面，練習切版很方便。

[Gulp boilerplate](https://github.com/jh3y/gulp-boilerplate)



# 2019-01-29

## Gulp 4 學習

### gulp-uglify 與 npx babel-node

- 在使用 gulp-uglify 轉換程式碼的時候，
`GulpUglifyError: unable to minify JavaScript Caused by: SyntaxError: Unexpected token: keyword (const)`

`throw new Error(`${msg(loc)} must be an array, or undefined`); Error: .presets must be an array, or undefined`

```js
如果使用 gulp-uglify，babel 的 .babelrc 設定檔如果不是下面那樣的話，跑 `npx babel-node xxx.js` 指令時會顯示錯誤

https://stackoverflow.com/questions/38886840/how-to-solve-this-minification-error-on-gulp

{
    "presets": "env"
}

所以改安裝這個 gulp-uglify-es
根據官方說明，後面要加 `.default`

const uglify = require('gulp-uglify-es').default

[babel-preset-env · Babel](https://new.babeljs.io/docs/en/next/babel-preset-env.html#how-it-works)

然後根據官方文件說明，.babelrc 裡面要設定 `"node": "current"`，像下面那樣設定，npx bael-node xxx.js 才不會顯示

/**
throw new Error(`${msg(loc)} must be an array, or undefined`);
^
Error: .presets must be an array, or undefined
*/

```


# 2019-02-03

### 一次 push 多個遠端

- `git remote add <name> <url>`: 新增遠端

- `git remote -v`: 顯示遠端數據庫的清單

```
origin	https://github.com/Lidemy/mentor-program-2nd-enter3017sky.git (fetch)
origin	https://github.com/Lidemy/mentor-program-2nd-enter3017sky.git (push)
```

- `git remote set-url --add --push <name> <new-url>`: 新增一個 Origin 路徑。

- `git remote -v`: 檢查一下。

```
origin	https://github.com/Lidemy/mentor-program-2nd-enter3017sky.git (fetch)
origin	https://github.com/Lidemy/mentor-program-2nd-enter3017sky.git (push)
origin	https://github.com/enter3017sky/mentor-program-2nd-enter3017sky (push)
```

git remote set-url --add --push origin https://github.com/Lidemy/mentor-program-2nd-enter3017sky.git

參考資料：
[讓你的 Git 一次 Push 到多個不同的遠端吧！](https://yami.io/git-multiple-origin/)
[2.5 Git 基礎- 與遠端協同工作](https://git-scm.com/book/zh-tw/v2/Git-%E5%9F%BA%E7%A4%8E-%E8%88%87%E9%81%A0%E7%AB%AF%E5%8D%94%E5%90%8C%E5%B7%A5%E4%BD%9C)


- git checkout <file_name>

[git取消修改，恢復版本命令筆記](http://www.vialley.com/452/git%E5%8F%96%E6%B6%88%E4%BF%AE%E6%94%B9%EF%BC%8C%E6%81%A2%E5%BE%A9%E7%89%88%E6%9C%AC%E5%91%BD%E4%BB%A4%E7%AD%86%E8%A8%98)

---

# 2019-02-09

### 在 command line 無法直接下 mysql 指令

> 參考資料: [Mac OS 上安裝 MySQL 以及相關設定筆記 - ZEUS // Design Studio](https://www.zeusdesign.com.tw/article/19-Mac%20OS%20%E4%B8%8A%E5%AE%89%E8%A3%9D%20MySQL%20%E4%BB%A5%E5%8F%8A%E7%9B%B8%E9%97%9C%E8%A8%AD%E5%AE%9A%E7%AD%86%E8%A8%98.html)

1. `sudo vim ~/.zshrc`: 用 root 編輯終端機( Oh My Zsh )的設定。

2. 尋找到 _export PATH=_ ，在下方加入 export PATH="/usr/local/mysql/bin:$PATH"

3. `sources ~/.zshrc` 或 `. ~/.zshrc` 重新載入(reload) _.zshrc_

- notes: `source <filename>` or dot operator `. <filename>`: 是一樣的。

參考資料: [source or dot operator Man Page - Linux](https://ss64.com/bash/source.html)

4. command line 輸入 `mysql` 或 `echo $path` 試試看！


### 查詢目前使用中的 port

[Mac OS/Linux命令查詢網絡端口占用情況](https://www.cnblogs.com/kaiye/archive/2013/05/25/3099393.html)
[【筆記整理】CentOS常用指令整理( I ~ L ) | ghoseliang - 點部落](https://dotblogs.com.tw/ghoseliang/archive/2012/11/23/85021.aspx)

查詢目前使用中的 port 及 process id: `lsof -n -i | grep LISTEN`

`netstat -an | grep  3306`

`sudo lsof -i -P | grep -i "listen"`

# 2019-02-09

詳細教學：[Mac 電腦安裝及終端命令使用 mysql](https://www.jianshu.com/p/65595b0e59ad)
[鳥哥的 - vim 程式編輯器](http://linux.vbird.org/linux_basic/0310vi.php)

### vim colorscheme 配置

1. 先找到 vim 設定檔：`sudo vim ~/.vimrc`

> 沒有的話自行建立。

2. 主題放在這個目錄底下(*.vim 格式)：`~/.vim/colors`

3. vim 編輯器一些細節的設定可以參考：[Wiki - vimrc 設定教學](http://wiki.csie.ncku.edu.tw/vim/vimrc)、 [個人化自己的vim文字編輯器(.vimrc 設定教學)](https://magiclen.org/vimrc/)

4. [Solarized](https://ethanschoonover.com/solarized/)

```js
  1 syntax enable                           " 打開語法高亮
  2 set background=dark
  3 set number                              " 顯示行號
  4 set cursorline                          " 光標底線：顯示游標所在的列
  5 set tabstop=4                           " 縮排間隔數:4
  6 set t_Co=16                             " 環境變數：決定 vim 支援的顏色數量
  7 let g:solarized_termcolors=256
  8 set showcmd
  9 colorscheme solarized                   " 配置的主題
 10
 11 " Key Mapping 輸入左邊 完成右邊
 12 inoremap ( ()<Esc>i
 13 inoremap " ""<Esc>i
 14 inoremap ' ''<Esc>i
 15 inoremap [ []<Esc>i
 16 inoremap {<CR> {<CR>}<Esc>ko
 17 inoremap {{ {}<ESC>i
 18
```

# 2019-02-11

### 誤刪 `/src/local/` 救援過程。

誤刪 `/src/local/` 底下的檔案，而無法使用終端機與 iTerm2

爬文爬了一會兒，後來把 `/bin/zsh` 複製到 `/usr/local/bin/zsh`，終端機就可以打開了，但開啟終端機時顯示 `/Users/enter3017sky/.zshrc:source:38: no such file or directory: /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh`，然後再重新下載安裝就搞定了。

- `httpd -v`: 查看 Apache 版本

```js
Server version: Apache/2.4.34 (Unix)
Server built:   Aug 17 2018 18:35:43
```

- 編輯 _oh-my-zsh_ 設定檔 `sudo vim ~/.zshrc`

- 印出 _apache_ 錯誤訊息：`tail -f /var/log/apache2/error_log`。
[UNIX / tail 指令 : 印出檔案後面的部份](http://unix.tw/tail.htm)

配置好lamp服務器，把項目放到服務器上，發現項目訪問不了了，並提示：The requested URL xxx was not found on this server.。
錯誤原因：新搭建的環境，apache 的重寫未開啟，開啟重寫後，問題解決，方法如下：

- 編輯 apache 設定 `sudo vim /etc/apache2/httpd.conf`，找到 `#LoadModule rewrite_module modules/mod_rewrite.so`，去掉前面的“#”：`LoadModule rewrite_module modules/mod_rewrite.so`

- `sudo apachectl restart`

- `http://localhost` 總算顯示 __It works!__ 了

- `http://localhost/~enter3017sky/` 但是換到使用者目錄時瀏覽器顯示

```js
Forbidden
You don't have permission to access /~enter3017sky/ on this server.
Server unable to read htaccess file, denying access to be safe
```

- 然後再輸入 `$ tail -f /var/log/apache2/error_log`: 查看 _apache_ 錯誤訊息。

```js
[Tue Feb 12 18:44:55.575438 2019] [core:error] [pid 34466] AH00554: Access to file /Users/enter3017sky/Sites/.htaccess denied by server: not a regular file
[Tue Feb 12 18:44:55.596720 2019] [core:crit] [pid 34466] (9)Bad file descriptor: [client ::1:65485] AH00529: /Users/enter3017sky/Sites/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable and that '/Users/enter3017sky/Sites/' is executable

[Thu Mar 07 22:45:57.446794 2019] [mpm_prefork:notice] [pid 77474] AH00163: Apache/2.4.34 (Unix) PHP/7.1.23 configured -- resuming normal operations
[Thu Mar 07 22:45:57.447107 2019] [core:notice] [pid 77474] AH00094: Command line: '/usr/sbin/httpd -D FOREGROUND'
```

- 最後把之前新增在目錄底下的 _.htaccess_ 刪除就解決問題了

參考資料：[IBM Access to file <path>.htaccess denied by server: not a regular file - Taiwan](https://www-01.ibm.com/support/docview.wss?uid=swg21250562)

[The Perfect Web Development Environment for Your New Mac - Chris Mallinson](http://mallinson.ca/posts/5/the-perfect-web-development-environment-for-your-new-mac)

---

### `$ apachectl configtest` 檢查設定時跳出錯誤訊息 AH00557 AH00558

#### 設定檔相關

> apache 設定 `sudo vim /etc/apache2/httpd.conf` 或 `sudo vim /private/etc/apache2/httpd.conf`
> apache 虛擬主機設定 `sudo vim /etc/apache2/extra/httpd-vhosts.conf`
> apache 伺服器資訊設定 `sudo vim /etc/apache2/extra/httpd-info.conf`
> apache 日誌 `cd /private/var/log/apache2`
> 主機域名設定 `sudo vim /etc/hosts`
> 個人配置 `vim /etc/apache2/users/enter3017sky.conf`

> 參考資料 [升级到mac sierra后引发的Httpd血案 · Issue #64 · bluers/blog](https://github.com/bluers/blog/issues/64)

- `$ apachectl configtest` 檢查配置，然後跳出錯誤訊息。

```
AH00557: httpd: apr_sockaddr_info_get() failed for MyMac
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1. Set the 'ServerName' directive globally to suppress this message
```

- `$ sudo vim /private/etc/apache2/httpd.conf` 然後找到 _ServerName www.example.com:80_ 改成 _ServerName localhost:80_ ， 然後 `:wq` 儲存離開，`$ apachectl configtest` 再檢查一次。

```
apachectl configtest
AH00112: Warning: DocumentRoot [/usr/docs/dummy-host.example.com] does not exist
AH00112: Warning: DocumentRoot [/usr/docs/dummy-host2.example.com] does not exist
Syntax OK
```

- `Syntax OK` 看來大致上是沒問題了XD


---

- `/private/etc/apache2/httpd.conf` 裡面的路竟打錯，`$ apachectl configtest` 可測試檢查設定檔有沒有問題。

```vi

apachectl configtest

AH00526: Syntax error on line 262 of /private/etc/apache2/httpd.conf:
DocumentRoot '/usr/~/Sites' is not a directory, or is not readable
<!-- 檢查編輯 apache 設定 -->
sudo vim /private/etc/apache2/httpd.conf

apachectl configtest
AH00112: Warning: DocumentRoot [/user/enter3017sky/Sites/] does not exist
Syntax OK

<!-- 編輯虛擬主機設定 -->
sudo vim /etc/apache2/extra/httpd-vhosts.conf
apachectl configtest
Syntax OK
```

---

### 設定 Apache 伺服器狀態訊息查看

在爬文的過程中，看到這串指令 `$ sudo apachectl status` 然後顯示以下的訊息，點去 _http://localhost:80/server-status_ 發現
找不到。

```
Go to http://localhost:80/server-status in the web browser of your choice.
Note that mod_status must be enabled for this to work.

Not Found
The requested URL /server-status was not found on this server.
```

- 跟著線索查下去，找到[這篇](http://blog.51cto.com/shunzi/1380604)

- 再去設定找`sudo vim /private/etc/apache2/httpd.conf` 取消掉 `Include /private/etc/apache2/extra/httpd-info.conf` 的註解。

```
#Real-time info on requests and configuration 伺服器狀態資訊
#Include /private/etc/apache2/extra/httpd-info.conf
```

- 再去 _http://localhost:80/server-status_ 查看發現變成被禁止訪問。

```
Forbidden
You don't have permission to access /server-status on this server.
```

- 修改設定 `sudo vim /etc/apache2/extra/httpd-info.conf` 以下三種方式都可以。

> 參考資料：[第十三章 網頁伺服器](https://www.twbsd.org/cht/book/ch13.htm)

> [How do I access server-status on MacOS X Lion?](https://serverfault.com/questions/393542/how-do-i-access-server-status-on-macos-x-lion)
> [403 Forbidden Error When Enabling /server-status in Apache HTTPD Server](https://techjourney.net/403-forbidden-error-when-enabling-server-status-in-apache-httpd-server/)
> [Unable to get /server-status mod working with Apache2 on Ubuntu | DigitalOcean](https://www.digitalocean.com/community/questions/unable-to-get-server-status-mod-working-with-apache2-on-ubuntu)
> [The requested URL /server-status was not found on this server](http://blog.51cto.com/shunzi/1380604)

```
# 設定可查看 localhost.server-status 狀態
<Location /server-status>
    SetHandler server-status

    Order deny,allow
    Deny from all
    Allow from 127.0.0.1 ::1
    Allow from <my public IP>
    # 設定允許訪問 IP
</Location>
```

```
<Location /server-status>
    SetHandler server-status
    Allow from all
    # 設定允許全部訪問
</Location>
```

```
<Location /server-status>
    SetHandler server-status
    # 或者乾脆都刪掉
</Location>
```

- 然後 `sudo apachectl restart` ， _http://localhost:80/server-status_ 再測試一下。


### 設定安裝 phpmyadmin

> 參考資料：[CentOS 7 安裝 phpMyAdmin 4.7 - BrilliantCode.net](https://www.brilliantcode.net/262/centos-7-install-phpmyadmin-4-7/)


1. phpmyadmin 官方下載：[phpMyAdmin - Downloads](https://www.phpmyadmin.net/downloads/)

2. 移動到 `/usr/local/` 並改名為`phpmyadmin`

- `sudo mv ~/Downloads/phpMyAdmin-4.8.5-all-languages /usr/local/phpmyadmin`

3. 編輯 apache2 設定 `sudo vim /private/etc/apache2/httpd.conf` ，在底下添加以下。

- `Alias /phpmyadmin "/usr/local/phpmyadmin"` 設定別名

```
# 設定 phpmyadmin
Alias /phpmyadmin "/usr/local/phpmyadmin"
<directory "/usr/local/phpmyadmin">
    Options FollowSymLinks
    AllowOverride All
    Order Allow,Deny
    Allow from all
</Directory>
```

### `localhost/phpmyadmin` 顯示 mysqli_real_connect(): (HY000/2002): No such file or directory

/usr/local/etc/phpmyadmin.config.inc.php

1. `/usr/local/phpmyadmin` 在目錄底下找 `config.sample.inc.php`，然後複製並改名 `cp config.sample.inc.php config.inc.php`。

2. `sudo vim config.inc.php`: 將原本這行：`$cfg['Servers'][$i]['host'] = 'localhost';` 改成 `$cfg['Servers'][$i]['host'] = '127.0.0.1';`

3. `sudo mysqld restart`

### Macbook 本機 Mysql 配置

- 安裝官方 Mysql GUI [MySQL :: MySQL 5.7 Reference Manual :: 2.4.2 Installing MySQL on macOS Using Native Packages](https://dev.mysql.com/doc/refman/5.7/en/osx-installation-pkg.html)

- MySQL on macOS Using Native Packages 安裝完之後會有一個確認框，會附上初始的密碼。

- **注意** 沒有 my.cnf 配置檔

```js
2019-02-12T11:15:24.244037Z 1 [Note] A temporary password is generated for root@localhost: Ry5)wzQs%W+b
If you lose this password, please consult the section How to Reset the Root Password in the MySQL reference manual.
```

1. `$ cd /usr/local/mysql/bin` 移到 mysql 的目錄底下
2. `$ ./mysql -u root -p` 按下 Enter 之後輸入初始密碼。

```js
//  mysql 指令
  -u, --user=name     User for login if not current user.
  -p, --password[=name]     Password to use when connecting to server. If password is not given it's asked from the tty.
  -h, --host=name     Connect to host.
```

3. `mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'NewPassWord';` 輸入指令以及新的密碼。

參考資料：
[macos - Setting the MySQL root user password on OS X - Stack Overflow](https://stackoverflow.com/questions/6474775/setting-the-mysql-root-user-password-on-os-x)


- `$ alias`: 可以查看設定的別名。

- `$ updatedb` 別名: `sudo /usr/libexec/locate.updatedb` 更新資料庫的資料，讓 `locate` 指令快速準確查找。
[updatedb for MAC OSX Using alias](https://www.commandlinefu.com/commands/view/11788/updatedb-for-mac-osx)
[Mac下使用locate命令和更新数据库](https://www.cnblogs.com/devilyouwei/p/6336863.html)
[Linux的五个查找命令 - 阮一峰的网络日志](http://www.ruanyifeng.com/blog/2009/10/5_ways_to_search_for_files_using_the_terminal.html)
[updatedb命令_Linux updatedb 命令用法详解](http://man.linuxde.net/updatedb)

### Warning: session_start()

- Warning: session_start(): Cannot send session cache limiter - headers already sent

- 確定`<?php` 開始在第一行(譬如說第二行開始，第一行的空白也會導致錯誤產生)，以及 `session_start()` 是程式碼的第一行。

---

# 2019-02-19

express - 引入 user 中的函數名稱打錯

```
Error: Route.get() requires a callback function but got a [object Undefined]
```

# 2019-02-28

## AWS-EC2 Nginx 環境配置

- 主機是 AWS EC2

[How To Install Nginx on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-18-04)
[How To Install Linux, Nginx, MySQL, PHP (LEMP stack) on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-linux-nginx-mysql-php-lemp-stack-ubuntu-18-04)



### Ubuntu 指令相關

- `netstat -ntpl`: 查詢已使用端口

- `dpkg --get-selections`: 查詢已安裝套件

- `dpkg --get-selections | grep php-fpm`: 查詢 _php-fpm_ 是否已安裝



### 2019-03-03

- 不知名的原因在 `App.js` 輸入 `import "./main.css"` 一直出錯，後來也是這樣用，但突然就沒問題了


```js

ERROR in ./src/main.css 2:0
Module parse failed: Unexpected token (2:0)
You may need an appropriate loader to handle this file type.
|
> .container {
|     margin-top: 4rem;
| }
 @ ./src/App.js 22:0-20
 @ ./src/index.js
 @ multi (webpack)-dev-server/client?http://localhost:8080 (webpack)/hot/dev-server.js ./src/index.js
```



原本的 todo-list 用 Jquery 及 Bootstrap 寫的，自己寫的 CSS 成功了，現在來引入原本的 bootstrap ，首先 `yarn add bootstrap` 安裝，原本寫 `import bootstrap from 'bootstrap'`，但是跳出錯誤了。

```js
ERROR in ./node_modules/bootstrap/dist/js/bootstrap.js
Module not found: Error: Can't resolve 'jquery' in '/Users/enter3017sky/Documents/mentor-program-2nd-enter3017sky/homeworks/week12/hw1/node_modules/bootstrap/dist/js'
```

原因是沒裝 JQuery ，但我只想用引入 bootstrap 的 css ，所以 `import bootstrap from 'bootstrap/dist/css/bootstrap.min.css'` 這樣就ＯＫ了。





# 2019-03-06

在編輯留言板的 php 的過程，弄一個不好，出現 500 錯誤，之後要測試一下如何倒去 500 錯誤的畫面。

然後查了一下 nginx.conf 看到 error_log 的位置，`sudo vim /var/log/nginx/error.log`，查看一下，主要是編輯過程中大括號的問題

```
2019/03/06 19:47:10 [error] 28503#28503: *1191 FastCGI sent in stderr: "PHP message: PHP Parse error:  syntax error, unexpected '}', expecting end of file in /var/www/html/message_board/index.php on line 203" while reading response header from upstream, client: 163.13.19.80, server: forum.enter3017sky.tw, request: "GET /index.php HTTP/1.1", upstream: "fastcgi://unix:/var/run/php/php7.2-fpm.sock:", host: "forum.enter3017sky.tw"


2019/03/06 19:50:47 [error] 28503#28503: *1211 FastCGI sent in stderr: "PHP message: PHP Warning:  include_once(/templates/Parsedown.php): failed to open stream: No such file or directory in /var/www/html/message_board/index.php on line 3

PHP message: PHP Warning:  include_once(): Failed opening '/templates/Parsedown.php' for inclusion (include_path='.:/usr/share/php') in /var/www/html/message_board/index.php on line 3

PHP message: PHP Recoverable fatal error:  Object of class DateTime could not be converted to string in /var/www/html/message_board/index.php on line 109" while reading response header from upstream, client: 163.13.19.80, server: forum.enter3017sky.tw, request: "GET /index.php HTTP/1.1", upstream: "fastcgi://unix:/var/run/php/php7.2-fpm.sock:", host: "forum.enter3017sky.tw"

2019/03/06 19:50:50 [error] 28503#28503: *1212 FastCGI sent in stderr: "PHP message: PHP Warning:  include_once(/templates/Parsedown.php): failed to open stream: No such file or directory in /var/www/html/message_board/index.php on line 3

PHP message: PHP Warning:  include_once(): Failed opening '/templates/Parsedown.php' for inclusion (include_path='.:/usr/share/php') in /var/www/html/message_board/index.php on line 3

PHP message: PHP Recoverable fatal error:  Object of class DateTime could not be converted to string in /var/www/html/message_board/index.php on line 109" while reading response header from upstream, client: 163.13.19.80, server: forum.enter3017sky.tw, request: "GET /index.php HTTP/1.1", upstream: "fastcgi://unix:/var/run/php/php7.2-fpm.sock:", host: "forum.enter3017sky.tw"

```

### 打開 nginx php 錯誤提示

` sudo vim /etc/php/7.2/fpm/php.ini`: display_errors = On

`/etc/php/7.2/fpm/pool.d/www.conf`: php_flag[display_errors] = on

### 2019-03-14 Ubuntu - Internal Server Error 500

- 由於在配置 Ubuntu 的 Nginx， `vim /var/log/nginx/error.log`，查看了一下 php 的錯誤訊息，原來出現錯誤的原因是因為，utils 裡面的函式無法重新宣告，因為我把原本的 _include_ 改成 _include\_once_。

```php
2019/03/14 14:15:22 [error] 5131#5131: *5184 
FastCGI sent in stderr: "PHP message: PHP Fatal error:  Cannot redeclare renderDelAndEditBtn()
 (previously declared in /var/www/html/message_board/utils.php:50) in /var/www/html/message_board/utils.php on line 50" while reading response header from upstream,
client: 163.13.19.80,
server: forum.enter3017sky.tw,
request: "POST /add_comment.php HTTP/1.1",
upstream: "fastcgi://unix:/var/run/php/php7.2-fpm.sock:",
host: "forum.enter3017sky.tw",
referrer: "http://forum.enter3017sky.tw/index.php?page=1"






# 0329 人生中第一次面試

[亞惿](https://www.104.com.tw/jobbank/custjob/index.php?r=cust&j=3c3a4224445c3e2130323c1d1d1d1d5f2443a363189j99)

11:03，太棒了我遲到了，依導航的引導到了某個板橋的巷弄中，確定了門牌號碼，但我眼前是一間很潮的牛肉麵店，不確定位置在哪，直接撥了電話給亞惿，原來在麵店後方的入口對面，就是亞惿的門口了，聽面試官說老闆是同一個。

大致上的流程，大概花了五到十分鐘填了基本資料，然後問我有沒有要介紹的作品，然後大概講改了那些作品，然後面試官讓我看了他們的作品、講解當中的細節、以及他們公司工作分配、網站設計的架構等等。

最後面試官讓我看了一個他們設計的網站，讓我去估算，如果是我可能要做多久，後來我回答了，假設在公司中，擁有那些資源，大約是三天，然後跟我說其實蠻多人會高估的，其實他會給一個禮拜。

然後跟我介紹一下題目，大概確認了我的時間，週日完成之後再回寄給他。我問了一個問題，團隊有幾個人，沒有問到薪資的部分而感到可惜。整個面談大概一個小時，有點緊張但是整體來說蠻輕鬆的，就是聊天的感覺。

人生的第一次面試，我給自己 70 分。

---


回家的途中，網路一兩年前負評略多、老師也有提過、官網看起來頗奇怪的丞希綠色科技 Line 我，原本約三點 Line 線上聊，下午兩點初頭的時候加了我的 Line，不過我在騎車。

回去吃個飯之後，跟丞希綠色科技的子漢詢問之後打給我，對了，起頭是一封 mail ：

```js
在104看到您的履歷, 請問您對創業感興趣嗎?

以下也簡要介紹：我們現正全力衝刺、招兵買馬。主要在四大領域部分 APP、Web、IoT、及機器人，分為兩個事業單位：
(1) 第一個事業單位：ODM, OEM, 提供客戶客製化委製服務：
(2) 第二個事業單位：連續創業平台, 目前有四個新創服務：
立體視覺運算研發以及其優化與最輕便、最彈性、最適化
台灣保險與醫療之人工智慧技術導入與整合
理財機器人之建構於金融科技系統
運用行動智慧與深度學習建立治療型前後台於糖尿病病患護理
相關介紹：
創辦人-高子漢 Travor:
https://goo.gl/YwA8tN
團隊組成：
https://goo.gl/DNJEHt
業務與公司說明：
https://goo.gl/TI5EaJ
成品集：
https://goo.gl/AxQIzD
```

而我的回覆是「您好，我在找尋前端相關的工作，關於貴公司提到創業的部分不理解是什麼意思，能否忙碌之餘替我解釋一下。」

聊了一下，對談中對方滔滔不絕地說了「做一次收一次的方式賺錢太慢、創業、企圖心、合作、目標、想法、第三方平台難提供的歸屬感、技術、媒體」有點忘了。

我覺得他的想法其實蠻好的，只是我心中浮現了「好點子？抱歉我目前沒有。而我又能提供什麼給你們呢？」，我也提出了心中的疑問，總之，最後他請 hr 跟我聯絡。

然後我又收到：

```js
Hello 信越您好

回答以下，就開始我們面試程序唷，收到您回覆，
我們會review，視情況跟您約上線語音, 如果語音面試通過之後, 則會邀約您會面面試:

1. 現在經濟壓力如何？ 若在台北工作，住宿部分有需要協助？
2. 有定期參加過哪些技術社群? 以及 有定期參加過哪些技術conference？
3. 現在或是過去在學生時代，或是現在有擔任過哪些幹部？ 以及 有參與過哪些競賽？
4. 喜歡什麼樣的運動？
5. 有哪些興趣？

6. 有哪些從小時到現在還在進行的事情
7. 未來還有哪些夢想或是目標想要實現？
8. 技術方面認為自己有哪些優勢？哪些劣勢？
9. 你覺得西元3000年的地球會是如何？
10. 人生有哪些事情非做到不可?

11. 會想那時候退休? 
12. 如果用一個東西當比喻，工作你會比喻什麼? 如果用一個東西當比喻，技術你會比喻什麼？
13. 如果公司一開始給你一千萬你會如何？
14. 假設面試通過之後, 你希望公司幫助你實現，或是帶給你的是？ 以及 有哪些你希望可以幫助公司實現，或是帶給公司？
15. 這次你的應徵會很加入我們公司？在我們公司會想要加入多久？

感恩

Enzo Chang
丞希綠色資訊
``` 
有點多，還沒研究。
不過反正我也沒啥經驗，不花太多時間的前提下看看吧。

---

今天還完成了主動邀約的資峰科技有限公司給的 PHP 題目，並約了 4/2 14:00 面試。 

主動邀約：辰城科技有限公司 4/3 10:30 面試。




# 2019-03-31

![Imgur](https://i.imgur.com/IjVGjnL.png)

無時無刻都在想 code，滑 IG 也在看 code，最近看到這個冒泡排序，零散的時間就想一下看一下，後來自己嘗試練習一下。

```js
let myArr = [3, 6, 9, 4, 5, 1, 0, 7, 8, 2]
const bubbleSort = (arr) => {
    let sorted = false
    while(!sorted) {
        sorted = true
        arr.forEach((item, i) => {
            if(item > arr[i + 1]) {
                arr[i] = arr[i + 1]
                arr[i + 1] = item
                sorted = false
            }
        });
    }
    return arr
}
```

`let sorted = false`: 設定一個 flag，表示排序未完成。
`while(!sorted)`: 排序未完成的話會往下執行。
`sorted = true`: 這邊在設定一個變數，先表示已經排序過了。
然後用 forEach 執行排序，當每個 item 都比下一個元素小的話，就表示排序完成了，不會進入條件裡面，就會 `return arr`，跳出 while 迴圈。

後來發現照片中的 `let len = arr.length - 1` 沒有執行到，後來就嘗試用 for 寫寫看。

```js
const bubbleSort = (arr) => {
    let len = arr.length - 1
    let sorted = false
    let tmp = 0
    // if(!sorted) {
        for(let i = 0; i < len; i++) {
            sorted = true
            // console.log('arr[i]', arr[i], 'arr[i+1]',  arr[i+1], 'tmp',  tmp)
            if(arr[i] > arr[i + 1]) {
                tmp = arr[i]
                arr[i] = arr[i + 1]
                arr[i + 1] = tmp
                // console.log('arr[i]', arr[i], 'arr[i+1]',  arr[i+1], 'tmp',  tmp)
                sorted = false
                if(!sorted) {
                    bubbleSort(arr)
                }
            }

            console.log('arr[i]', arr[i], 'arr[i+1]',  arr[i+1], 'tmp',  tmp)
            console.log('arr', arr)
            console.log(sorted)
        }
        console.log(sorted)
    // }
    console.log(sorted)
    return arr
}
```

寫完之後，一直覺得很奇怪，為什麼跑過一輪就停止執行了呢？後來才發現，原來根本就是我寫錯了，跟 while 迴圈超級不熟的我，非常習慣用 for 迴圈，所以一開始我就寫了 if，原因就是出在 if 只會判斷一次啊！

然後尋找原因的過程中，想到用了遞迴，然後莫名其妙解決了。

整理一下的程式碼。

```js
const bubbleSort = (arr) => {
    let len = arr.length - 1
    let sorted = false
    let tmp = 0
    for(let i = 0; i < len; i++) {
        sorted = true
        if(arr[i] > arr[i + 1]) {
            tmp = arr[i]
            arr[i] = arr[i + 1]
            arr[i + 1] = tmp
            sorted = false
            if(!sorted) {
                bubbleSort(arr)
            }
        }
    }
    return arr
}
let sortedArr = bubbleSort(myArr)
console.log(sortedArr)
```

然後彷彿腦袋中的有幾根筋通了的我，很快的用原本想用方式完成了！

```js

const bubbleSort = arr => {
    let len = arr.length - 1
    let sorted = false
    let tmp = 0
    while(!sorted) {
        sorted = true
        for(let i = 0; i < len; i++) {
            if(arr[i] > arr[i + 1]) {
                tmp = arr[i]
                arr[i] = arr[i + 1]
                arr[i + 1] = tmp
                sorted = false
            }
        }
    }
    return arr
}
let newArr = bubbleSort(myArr)
console.log(newArr)
```
