# 每日學習筆記

## 2018-12-02

### 1. 優化 week7-2 to-do list

 - 1.增加功能: 新增留言的淡出效果 `fadeIn()`。

```html
<ul class="todo_list">
    <li></li>
    <li></li>
    <li></li>
</ul>
```

```js
// 新增 todo   版本1: 無效果
let addNewToDo = $('.todo_list').append(<li>new to do</li>);

// 版本2: 新增時，整個 list 一起 fadeIn
$($('.todo_list').append(newTodo)).hide().fadeIn(1000)

// 版本3: 這兩種寫法都可以, 只有新增的項目 fadeIn

$(newTodo).hide().appendTo('.todo_list').fadeIn(500)
$('.todo_list').append($(newTodo).hide().fadeIn(500))
```

- 2. 優化 fadeOut/remove

- example 1:

```javascript
// 原本
el.parent().parent().fadeOut(500, function() {
   el.parent().parent().remove();
})

// 使用 $(this)
el.parent().parent().fadeOut(500, function() {
   $(this).remove();
})
```

- example 2:

```javascript
如果在不同的地方使用它，你應該把它變成一個插件。

jQuery.fn.fadeOutAndRemove = function(speed){
    $(this).fadeOut(speed,function(){
        $(this).remove();
    })
}
然後：
// Somewhere in the program code.
$('div').fadeOutAndRemove('fast');

```
參考資料：[How to “fadeOut” & “remove” a div in jQuery?](https://stackoverflow.com/a/8935220/10680064)


### 2. append()、appendTo()、prepend()、prependTo()



Child => appendTo => Parent
Parent => append => Child

```html
<!-- Here goes the Before -->
<div>
    <!-- Here goes the pr   epend -->
    This is div
    <!-- Here goes the Append -->
</div>
<!-- Here goes the After -->
```


添加到指定元素内部的后面
$(A).append(B)// 把B追加到A
$(A).appendTo(B)// 把A追加到B

添加到指定元素内部的前面
$(A).prepend(B)// 把B前置到A
$(A).prependTo(B)// 把A前置到B

添加到指定元素外部的后面
$(A).after(B)// 把B放到A的后面
$(A).insertAfter(B)// 把A放到B的后面

添加到指定元素外部的前面
$(A).before(B)// 把B放到A的前面
$(A).insertBefore(B)// 把A放到B的前面
參考資料：[jQuery](https://tw.saowen.com/a/06edaebb61dcfbc80b68024465936047b844fa8dafdd8c08602280bbde43a067)


- `before`: 在每个 p 元素前插入内容：

```js
$("button").click(function(){
  $("p").before("<p>Hello world!</p>");
});
```

- `insertBefore()`: 在每個 p 元素之前插入 span 元素：

```js
$("button").click(function(){
  $("<span>Hello world!</span>").insertBefore("p");
});
```

- `prepend()`: 在 p 元素的開頭插入內容：

```js
$(".btn1").click(function(){
  $("p"). prepend("<b>Hello world!</b>");
});
```

- `prependTo()`: 在每個 p 元素的開頭插入內容：

```js
$(".btn1").click(function(){
  $("<b>Hello World!</b>"). prependTo("p");
});
```

- `append()`: 在每個 p 元素結尾插入内容：

```js
$("button").click(function(){
  $("p").append(" <b>Hello world!</b>");
});
```

- `appendTo()`: 在每個 p 元素結尾插入內容：

```js
$("button").click(function(){
  $("<b>Hello World!</b>"). appendTo("p");
});
```

- `after`: 在每個 p 元素後插入內容：

```
$("button").click(function(){
  $("p"). after("<p>Hello world!</p>");
});
```

- `insertAfter()` 在每個 p 元素之後插入 span 元素：

```js
$("button").click(function(){
  $("<span>Hello world!</span>").insertAfter("p");
});
```
---

## 2018-12-03

思考留言板 ajax 編輯的邏輯

- `toISOString()`

```js
var today = new Date('05 October 2011 14:48 UTC');
console.log(today.toISOString()); // Returns 2011-10-05T14:48:00.000Z
```

```js
// 思考中
var check = function (){
    $eT = $(e.target)
    if($eT.parents('.sub-meg__user')){
        return $(this).parents('.sub-meg__user')
        console.log('sub-meg__user')
    } else {
        return $(this).parents('.meg__wrap')
        console.log('meg__wrap')
    }
}
check($eT)
```

- `phpinfo();`: 查看 PHP 版本以及相關資訊

- php 時區設定
1. 修改 php.ini 的設定:

   1. 路徑: `root/etc/php.ini`
   2. php.ini 裡面修改 `date.timezone=Asia/Taipei`
   3. 重新啟動 apache

2. 使用 php function: 在 php 內輸入 `date_default_timezone_set("Asia/Taipei")`

- `$timestamp = date('Y-m-d H:i:s');`: 留言板的新增留言的時間戳的做法

---

## 2018-12-04

- 留言板編輯留言，按下 submit 送出已編輯留言的時候，如果用 `.text()` 或 `.html()`，不能及時取得 textarea 的內容文字。用`val()` 才可以。

```js
const content = $eT.parents('.comments__wrapper').find('.editDone') // 取得編輯的文字

console.log(typeof content)
console.log('html(): ', content.html())
console.log('text(): ', content.text())
console.log('val(): ', content.val())
```

[](http://www.eion.com.tw/Blogger/?Pid=1148)

- 兩個方式幫數字補零，10 以下的數字經過轉換會變成字串

```js
if(s.toString().length === 1) {
  s = '0'+s;
}
if(s < 10) {
  s = '0'+s;
}
```

- 把 javascript 抽離起來之後，php 的時間函數不能用在 .js 裡面，所以這次用 js 的時間函式
  - getMonth() 像 index 從 0 開始，故 +1

```js
function showTime() {
  const today = new Date();
  const y = today.getFullYear();
  let month = today.getMonth()+1;
  let day = today.getDate();
  let h = today.getHours();
  let m = today.getMinutes();
  let s = today.getSeconds();
  if(day < 10) {
      day = '0'+day
  }
  if(h < 10) {
      h = '0'+h
  }
  if(m < 10) {
      m = '0'+m
  }
  if(s < 10) {
      s = '0'+s;
  }
  return `${y}-${month}-${day} ${h}:${m}:${s}`;
}
```

- VS Code 打開當下文件路徑的終端機: __` Option（或Alt）鍵 ⌥ + Control（或 Ctrl）鍵 ⌃ + ~`__ [Terminal in place](https://marketplace.visualstudio.com/items?itemName=Maples7.terminal-inplace)

---

## 2018-12-05

1. 事件代理：原本事件掛在 $('.wrapper__form') 但是這個元素本身也是動態新增的，所以新增的留言 submit、edit、delete 都無法執行。

```js
/** 
 * 
解法1：掛高高，掛在動態新增以外的那層
不同用法？的解法2： https://stackoverflow.com/questions/8408826/bind-event-only-once
    參考至[一對一檢討：roro part 1 31:34 秒處](https://www.youtube.com/watch?v=7FDPiIgp4i0&feature=youtu.be)

*/

 $('.container').on('click', 'input.submit__btn', function(e) {...}

```

2.路徑:

- [UNIX 檔案系統教材：絕對路徑與相對路徑](https://bcc16.ncu.edu.tw/4/unix/13.shtml)
- [2-3 連結 (Links)](http://mirlab.org/jang/books/html/link.asp?title=2-3%20%B3s%B5%B2%20(Links))

3.網頁讀取的 loading 狀態顯示

- [Ajax Event](http://api.jquery.com/Ajax_Events/)

```js
Local Events
 $.ajax({
   beforeSend: function(){
     // Handle the beforeSend event
   },
   complete: function(){
     // Handle the complete event
   }
   // ......
 });


Global Events
These events are triggered on the document, calling any handlers which may be listening. You can listen for these events like so:
 $(document).bind("ajaxSend", function(){
   $("#loading").show();
 }).bind("ajaxComplete", function(){
   $("#loading").hide();
 });
```

4.function 預設參數
 - [MDN 預設參數( Default parameters )](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Functions/Default_parameters)

  - [重新認識 JavaScript: Day 17 函式裡的「參數」](https://ithelp.ithome.com.tw/articles/10192368)

  - [[筆記] 談談JavaScript中函式的參數(parameter),arguments和展開運算子(spread)](https://pjchender.blogspot.com/2016/04/javascriptparameterargumentsspread.html)

5.第二次瀏覽同學們的留言板

- 一對一檢討：rubysih

  - [08:30 左右： 更新留言的方式：判斷 POST 的值然後用函式包 sql 來編輯或刪除留言的參考](https://youtu.be/gDe0ygaui4A?t=496)
  - [17:36 左右： code 方式蠻好的：時間的補零、函式的方式、原生 JavaScript Clone Element 的使用](https://youtu.be/gDe0ygaui4A?t=1100)

- [一對一檢討：Tian](https://youtu.be/mRjydPHrK9w)



[jQuery簡明參考手冊——30分鐘快速入門jQuery](https://www.jianshu.com/p/3e2768c8dad4)

---

 ## 2018-12-06

#### bootstrap

- [w3schools bootstrap Form 的形式](https://www.w3schools.com/bootstrap/bootstrap_forms.asp)

Oops, something is wrong


 Spacing Examples
.m-# / m-*-#	margin on all sides	
.mt-# / mt-*-#	margin top	
.mb-# / mb-*-#	margin bottom	
.ml-# / ml-*-#	margin left	
.mr-# / mr-*-#	margin right	
.mx-# / mx-*-#	margin left and right	
.my-# / my-*-#	margin top and bottom	
.p-# / p-*-#	padding on all sides	
.pt-# / pt-*-#	padding top	
.pb-# / pb-*-#	padding bottom	
.pl-# / pl-*-#	padding left	
.pr-# / pr-*-#	padding right	
.py-# / py-*-#	padding top and bottom	
.px-# / px-*-#	padding left and right


---

# 2018-12-10

1. 大樹加法嘗試解題

將任意值轉換成字串最常見的方式有三種：

- `String(value)`: 作為一個函式調用，並非作為建構器
- `''+value`
- `value.toString()`:不能用於 `null` 和 `undefined`


2. 清除共用的陣列
  - 將一陣列的長度設定為 0，會影響到共用的那個陣列。
  - 指定成一個空的陣列則不會影響。

```js
var a1 = [1, 2, 3]
var a2 = a1
a1.length = 0;

result => a1=[]; a2=[]

a1 = [];

result=>
a1=[]
a2 = [1, 2, 3]

```

- 陣列新增或移除
  - `Array.prototype.shift()`: 移除位於索引 0 的元素，並將之回傳。後續元素的索引都會減 1。

  ```js
  var arr = ['a', 'b']
  > arr.shift()
  =>'a'
  > arr
  => ['b']
  ```

- `Array.prototype.unshift(elem1, elem2, ...)`: 將給定的元素接附(prepends)在陣列的前面。它會回傳新的長度。

```js
var arr = ['c', 'd']
arr.unshift('a', 'b')
=> 4

>arr
=>['a', 'b', 'c', 'd']
  ```


- `Array.prototype.pop()`: 移除陣列最後一個元素，並將之回傳。
- `Array.prototype.push(elem1, elem2, ...)`: 將給定的元素加到陣列的末端，它會回傳新的長度。

- `apple()`: 能讓你以破壞性的方式把 arr2 附加到 另一個陣列 arr1 
- `Array.prototype.splice(start, deleteCount, elem1, elem2, ...)`: 從 start 開始，移除 deleteCount 個元素。你以 elem1, elem2, ... 取代了從 start 開始的 deleteCount 個元素。然後回傳被移除的元素。
- `Array.prototype.reverse()`

- `Array.prototype.sort()`


#### 串連切割連接(非破壞性的)

- `Array.prototype.concat(arr1, arr2, ...)`:建立一個新的陣列

- `Array.prototype.slice(begin, end)`: 將陣列元素拷貝到一個新的陣列，從 begin 開始，一直到(但不包含)位於 end 的元素。
  `['a', 'b', 'c', 'd'].slice(1, 3) => ['b', 'c']`

- `Array.prototype.join(separator)`: 將 `toString()` 套用到所有的陣列元素，並將字串 separator 放在它們之間，以此創建出一個新的字串。如果省略了 separator 就會使用 ','
  - join() 會將 undefined 與 null 轉為空字串。
    `[undefined, null].join('#') => '#'`
  - 陣列中的空缺處(holes)也會被轉為空字串。
    `['a',,'b'].join('-')  => 'a--b'`

```js
[3, 4, 5].join('-')
=>'3-4-5'
[3, 4, 5].join()
=>'3,4,5'
[3, 4, 5].join()
=>'345'
```

---

# 2018-12-11

建設主機 網域

- 登入遠端伺服器 
  - `ssh -i ~/.ssh/awsKey.pem ubuntu@ec2-52-196-131-60.ap-northeast-1.compute.amazonaws.com`
  - `ssh -i ~/.ssh/awsKey.pem ubuntu@IP(public)`

- 登入資料庫 `mysql -u root -p`
- 如果已經用 `sudo -i`或`sudo -u`登入 root的話，不需要指定使用者，直接`mysql -p`
  - Enter password: 你剛剛設定的密碼


- `alias`: 設定命令別名
- `ifconfig`: 查看、設定、開關網路介面狀態
  - UP: 這個標誌指出這個介面是開放的，可以發送和接收資料。
  - DOWN: 這個標誌指出這個介面是關閉的，也就是說，此時不能為主機發送和轉發包。
  - LOOPBACK
  - RUNNING: 這表示該介面已經被系統識別。
  - MULTICAST: 這表示介面支援多路傳送位址。
- `route`: 路由是此網跟彼網溝通的紐帶。用於查詢和設定路由表。
- `hostname`: 查看網路連線的主機名稱
- `host`: 查詢某個功能變數或主機名稱所對應的所有 IP 位址
- `nslookup`: 跟 host 基本上一樣。這個命令有兩種模式，互動式、非互動式，如果沒有傳遞任何參數給它、它就會進入互動式
- `tcpdump`: 是網路維運人員搜尋問題的好工具。透過不同的命令列選項來改變抓包狀態。
  - ex. 如果想捕獲 119.75.219.38 接收或發送的 http 的封包，將其結果產生詳細的報告。可以用下列的指令：`tccpdump tcp port 80 and host 119.75.219.38 > net_stat.txt`
-[查看系统 hostname 设置](http://yacca.github.io/2013/08/13/hostname-in-mac-osx.html)


- `apt-get update`
軟體資料庫同步：apt-get update 會根據 /etc/apt/sources.list 中設定到 APT Server 去更新軟體資料庫，在任何更新之前最好都先做這一個動作，讓軟體資料保持在最新的狀況之下。/etc/apt/sources.list 可以用 apt-setup 來設定。


設定 AWS EC2 

1. 設定 key 的權限 `chomd 400 key.pem`
2. `ssh -i "key.pem" ubuntu@ec2-54-238-243-3.ap-northeast-1.compute.amazonaws.com
`
參考資料：[How To Install Linux, Apache, MySQL, PHP (LAMP) stack on Ubuntu 16.04](https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu-16-04)
- 設定 `sudo vim /etc/apache2/apache2.conf`
- `ServerName server_domain_or_IP`
E45: 'readonly' option is set (add ! to override)
- 原因：指令前面沒輸入 sudo 
- 權限問題無法編輯文件：輸入 `qa!` 指令離開


- __Ubuntu 下 phpMyAdmin 的 404 Not Found 頁面__
1. 方法1:(用這個解決的)
  - _The requested URL /phpmyadmin was not found on this server._
  - 在終端上運行此命令，`sudo ln -s /usr/share/phpmyadmin /var/www/html/phpmyadmin`，並刷新您的phpmyadmin頁面

2. 方法2:

```
# link configure file to apache
$ sudo ln -s /etc/phpmyadmin/apache.conf /etc/apache2/conf.d/phpmyadmin.conf
# restart apache
$ sudo /etc/init.d/apache2 restart
```
參考資料：
[解決 Ubuntu 下 phpMyAdmin 的 404 Not Found 頁面 - kuoe0's dots](https://blog.kuoe0.tw/posts/2012/08/23/slove-phpmyadmin-404-not-found-in-ubuntu/)
[鏈結檔案（ln 指令](https://www.ibm.com/support/knowledgecenter/zh-tw/ssw_aix_71/com.ibm.aix.osdevice/cmd_linkfiles.htm)
延伸資料：[ubuntu phpmyadmin](https://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=320994#forumpost320994)



- 允許使用 PHP Short tag，輸入 `sudo vim /etc/php/7.2/apache2/php.ini`
  - 如果用`vim`，按`/`輸入關鍵字，按`n`查找下一個，`找到 short_open_tag = 改成 ON
- 離開 vim 編輯器(權限問題無法編輯文件)：輸入 `qa!` 指令強制離開


參考資料：[大家來學VIM（一個歷久彌新的編輯器）[六]](http://www.study-area.org/tips/vim/Vim-6.html)
[阿旺的 Linux 開竅手冊](http://wanggen.myweb.hinet.net/index.html)
[Linux常用指令整理](http://c8631506.blogspot.com/2015/04/linux_12.html)

CLI mysql 

- 登入: `mysql -u root -p` 然後輸入密碼。
- `show databases;`
- `show status;`
- 離開: `exit`、`quit`
- 注意結尾分號




設定留言參考資料：
[How To Install Linux, Apache, MySQL, PHP (LAMP) stack on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04)
[45 How To Install and Secure phpMyAdmin on Ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-on-ubuntu-18-04)
[How to Install a LAMP Stack on Ubuntu 18.04](https://www.linode.com/docs/web-servers/lamp/install-lamp-stack-on-ubuntu-18-04/#troubleshooting)
[How to setup Linux, Apache, MySQL, PHP (LAMP) Stack on Ubuntu 16.04](https://medium.com/techkylabs/how-to-install-linux-apache-mysql-php-lamp-on-ubuntu-16-04-f82a60b0d40d)

- AWS EC2 設置固定IP地址
  - 進入EC2控制面板，進入左側下方的“Elastic IPs”，
  - 點擊“Allocate New Address”申請一個固定的IP地址。
  - 選中IP地址，點擊“Associate Address”，然後選擇要使用的EC2主機即可。
  - 注意：不要申請IP後閒置（不綁定到雲主機），可能被收取額外費用。

參考資料：
[(AWS EC2) Service for EC2 指定固定IP及釋放IP](http://jyeh-blog.logdown.com/posts/712216-aws-ec2-service-for-ec2-specifying-a-fixed-ip)
[Amazon EC2防止被扣费的方法](https://www.59php.com/blog/43.html)



[ubuntu 默認防火牆安裝、啟用、查看狀態ufw](https://blog.csdn.net/m0_37864814/article/details/82961996)



- 設定別名連線：
  - 指令列都要打長長的一串，ip 還可能忘記，所以想到用別名的方式去改善
> [How to setup SSH config ：使用 SSH 設定檔簡化指令與連線網址](https://medium.com/@awonwon/how-to-setup-ssh-config-%E4%BD%BF%E7%94%A8-ssh-%E8%A8%AD%E5%AE%9A%E6%AA%94-74ad46f99818)

  - 如果對`ssh_config `配置上有問題，可以看這篇
> [ssh_config（5）：OpenSSH SSH客戶端配置文件 - Linux手冊頁](https://linux.die.net/man/5/ssh_config)
  - 重點大概是，才知道其中的差別
    - obtains configuration data from the following sources in the following order:
    1. command-line options
    2. user's configuration file (~/.ssh/config)
    3. system-wide configuration file (/etc/ssh/ssh_config)
    ~/.ssh/config


補充資料：[20. 增進 SSH 使用效率 - ssh_config](https://chusiang.gitbooks.io/working-on-gnu-linux/content/20.ssh_config.html)
[Using an SSH Config File - Media Temple](https://mediatemple.net/community/products/grid/204644730/using-an-ssh-config-file)

不一樣的用法：[SSH 公開金鑰認證：不用打密碼登入 Linux 設定教學，安全又方便 - G. T. Wang](https://blog.gtwang.org/linux/linux-ssh-public-key-authentication/)
 ssh-copy-id -i ~/.ssh/id_rsa.pub ubuntu@52.194.8.58



#### [用FileZilla 連接Amazon 的aws的主機](https://blog.csdn.net/michael1112/article/details/52537961)
- 1. 打開FileZilla 的"編輯" -> "設置" 對話框，在左邊的“選擇頁面” 選擇“SFTP”， 右邊點擊“添加密鑰文件...” 按鈕，導入Amazon給的密鑰文件。
- 2. 打開“文件”-> “站點管理器” ， 點擊左邊的“新站點”按鈕， 在右邊“常規”標籤中填入主機信息（即AWS Console中的Public DNS）,
  - "協議"中選"SFTP - SSH FileTransfer Protocol" ,
  - “登錄類型” 選“交互式”
  - “用戶” 中輸入用戶名(注意不能用默認的匿名用戶)
3. 點“連接”。完成。




### VPS 設定相關

[php.ini 中文翻譯](http://mic1491.pixnet.net/blog/post/30159855-php.ini%E8%A8%AD%E5%AE%9A%E6%AA%94%E4%B8%AD%E6%96%87%E8%AA%AA%E6%98%8E)
- 回到根目錄 `cd ~`
- 去網頁的目錄 `cd /var/www/html`
- 直接查看 PHP 錯誤訊息 `vim /var/log/apache2/error.log`。

- 直接查看 PHP 設定檔 `vim /etc/php/7.2/cli/php.ini` 
  - 在這裡改了 timezone 跟 include_path 沒有效果
  - 改了這個 `/etc/php/7.2/apache2/php.ini` 之後，查看 info.php 才有生效

- Loaded Configuration File	`/etc/php/7.2/apache2/php.ini`
- Scan this dir for additional .ini files	`/etc/php/7.2/apache2/conf.d`

- 顯示 MySQL 伺服器中資料庫資訊：`mysqlshow -h localhost -u root -p`
  - `-h`: 指定資料庫伺服器的主機名稱或 IP
  - `-u`: 連接資料庫伺服器的使用者名稱
  - `-p`: 連接資料庫伺服器的使用者密碼
  - `--count`: 顯示每個資料表中的資料的行數: `mysqlshow -h localhost -u root -p --count`
  - `-k`: 顯示資料表的索引
  - `-t`: 顯示資料表的型態

- `sudo service apache2 restart`
- 


在normal模式下按下 
/ 即可进入查找模式
输入要查找的字符串并按下回车。 
Vim会跳转到第一个匹配。 
按下 n 查找下一个，
按下 N 查找上一个。 
Vim查找支持正则表达式，
例如 /vim$ 匹配行尾的 "vim" 。2016年8月8日

https://harttle.land/2016/08/08/vim-search-in-file.html


## 2018-12-14

- 回到上一個動作`u`
[vim 指令](http://www2.nsysu.edu.tw/csmlab/unix/vi_command.htm)




- [在Mac設定Apache、PHP、MySQL](https://medium.com/@hyWang/%E5%9C%A8mac%E8%A8%AD%E5%AE%9Aapache-php-mysql-694430084d3a)
[英文版 完全照著做了ＸＤ](https://websitebeaver.com/set-up-localhost-on-macos-high-sierra-apache-mysql-and-php-7-with-sslhttps)
  - 到 it work! 之後就不能用了。有空再研究。


[stmt 教學](https://websitebeaver.com/php-pdo-prepared-statements-to-prevent-sql-injection)



- 查看 mysql 的配置狀態：`php -r 'phpinfo();' | grep -i mysqli` 



- 錯誤排除
- 在 PHP 7.2 之後，count method 如果傳入 NULL 參數就會噴 `Warning：
count(): Parameter must be an array or an object that implements Countable`
目前 phpMyAdmin 尚未修正此問題，因此需要手動調整。
[Install phpMyAdmin on Ubuntu](https://blog.johnsonlu.org/install-phpmyadmin-on-ubuntu/)
  其他參考資料：
  - [phpmyadmin - count(): Parameter must be an array or an object that implements Countable](https://stackoverflow.com/questions/48001569/phpmyadmin-count-parameter-must-be-an-array-or-an-object-that-implements-co)
  - [Problem with phpMyAdmin and PHP 7.2: “Warning in ./libraries/sql.lib.php#613 count(): Parameter must be an array or an object that implements Countable”](https://devanswers.co/problem-php-7-2-phpmyadmin-warning-in-librariessql-count/)







  21、檢視網路狀態命令
# netstat -antp #檢視所有網路連線
# netstat -lntp #只檢視監聽的埠資訊
# lsof -p pid #檢視程序開啟的檔案控制代碼
# lsof -i:80 #檢視埠被哪個程序佔用


- 找出 IP 位址：`ifconfig |grep -o '[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}'`
  - `-o` 只顯示匹配字元


- 檢視伺服器IP連線數: `netstat -tun | awk '{print $5}' | cut -d: -f1 |sort | uniq -c | sort -n`
  - `-tun`：-tu 是顯示 tcp 和 udp 連線，n 是以 IP 地址顯示
  - `cut -d：-f1`：cut 是一個選擇性顯示一行的內容命令，-d 指定：為分隔符，-f1 顯示分隔符後的第一個欄位。
  - `uniq -c`：報告或刪除文中的重複行，-c 在輸出行前面加上出現的次數
  - `sort -n`：根據不同型別進行排序，預設排序是升序，-r 引數改為降序，-n 是根據數值的大小進行排序


- 返回此前目錄:只需要輸入 `cd –` 即可返回此前目錄。



'strict' => false,
into config/database.php within mysql array

- 最後在 `add_comments.php` 裡面 `var_dump($variable)`所有的變數，發現 `if($stmt->execute())` 的結果是 false，然後最後 `$conn->error` 印出 `General error: 1364 Field 'user_ID' doesn't have a default value`，發現 user_id 是 0，但這個也蠻奇怪的，在自己的伺服器跟mentor的伺服器都沒遇到，或許有設定配置的問題。最後在 phpmyadmin 直接設定預測值為 null，就正常運作了。
[4個MySQL 資料庫基本除錯技巧](https://www.qa-knowhow.com/?p=4631)


# 2018-12-15

設定哪些IP可以或不可以登入這台電腦

在/etc資料夾下有兩個檔案：hosts.allow 和 hosts.deny，前者是用來設定哪些IP可以登入這台電腦，後者則是用來設定哪些IP不能登入這台電腦。
我們可以在終端機輸入以下的指令：
[Ubuntu - SSH 的安裝與設定 和 設定SSH遠端連線功能](https://sites.google.com/site/linuxcooltea/home/ubuntu-she-dingssh-yuan-duan-lian-xian-gong-neng)


2.錯誤原因：
（1）檢查數據表的各個字段拼寫是否正確；
（2）檢查插入的變量的值，使用語句var_dump($xxx)，查看此變量值格式、數值是否正確；
（3）檢查數據表的NULL字段，使用命令desc table_name，當某一個或多個字段屬性為not null時，而卻沒有數據插入，則會導致插入數據錯誤。（這是本案例出現錯誤的原因）



- PDO 很好的教學文：[Re-introducing PDO – the Right Way to Access Databases in PHP](https://www.sitepoint.com/re-introducing-pdo-the-right-way-to-access-databases-in-php/)
[PHP Data Objects (PDO) 簡易使用說明(1)-啟用PDO讀取資料庫資料](https://pjchender.blogspot.com/2015/08/php-data-objects-pdo.html)




DSN （數據源名稱） 編輯
Data Source Name (DSN)的PDO命名慣例為：PDO驅動程序的名稱，後面為一個冒號，再後面是可選的驅動程序連接數據庫變量信息，如主機名、端口和數據庫名。



1. CREATE DATABASE your_database;
2. USE your_database




# __Linux__ 指令：

## `id`

- `id -u`: 查詢自己是否為 root，如果是 0 就是 root。
- `-u`: 顯示使用者 ID。
- `-F`、`-un`: 顯示實際的帳號名稱。

## `sudo`

- `sudo -i`: login 運行登錄 shell 作為目標用戶;也可以指定命令。用 `logout` 登出 root。
- `sudo -s`: shell 運行 shell 作為目標用戶;也可以指定命令。用 `exit` 離開 root 權限。

## `who`

- `who`: 列出所有使用者及簡單的資訊。

```js
enter3017sky console  Dec 12 13:18
enter3017sky ttys001  Dec 16 00:01
enter3017sky ttys002  Dec 17 12:05
  ```

- `who am i`: 列出使用者及簡單的資訊。
  - ex.`enter3017sky ttys001  Dec 16 00:01`

- `whoami`: 列出使用者名稱。
  - `enter3017sky`
- `w`: 列出所有使用者以及更詳細的資訊。

```
15:19  up 5 days,  2:01, 3 users, load averages: 2.85 3.25 3.81
USER     TTY      FROM              LOGIN@  IDLE WHAT
enter3017sky console  -                三13   5days -
enter3017sky s001     -                日00       - w
enter3017sky s002     -                12:05      12 ssh ec2
```

### `nslookup`

- 這是用來查詢或反查詢 DNS 的指令。
  - ex. `nslookup google.com`




### date

- 查看日期的指令。

### cal

- 這是用來叫出日曆的指令。



# 2018-12-17

## _錯誤訊息：ERROR 1364 (HY000): Field 'xxx' doesn't have a default value_

1. 初次排除：雲端虛擬主機部署完成之後，首先當然是放些東西確認看看。後來發現留言板編輯、刪除、更新都正常。但是新增留言就是 sql fail，最後在 `add_comments.php` 裡面用 `var_dump($variable)`印出有嫌疑的變數，發現 `if($stmt->execute())` 的結果是 false，然後最後 `$conn->error` 印出 _General error: 1364 Field 'user_ID' doesn't have a default value_，發現 user_id 沒有用到，phpmyadmin 裡面與沒有設定預設值，但這個也蠻奇怪的，在自己的伺服器跟mentor 的伺服器都沒遇到，或許有設定配置的問題。最後在 phpmyadmin 直接設定預測值為 null，就正常運作了。

2. 第二次解決：後來在 CLI 練習指令的時候，又發現了這個問題 `insert into`時，如果某個值沒放輸入又沒預設值，就會跳 ERROR。然後找到了，原來 `sql_mode` 是嚴格模式的關係。

### 取消mysql5.7的 strict mode 模式：

1. SSH 連線到伺服器的 root，輸入`sudo vim /etc/mysql/conf.d/disable_strict_mode.cnf`，以新增並建立一個 disable_strict_mode.cnf 檔案，
  
2. 輸入

```
[mysqld]
sql_mode=IGNORE_SPACE,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
```

3. 輸入指令重新啟用 mysql :`sudo service mysql restart`

>為了確認strict mode模式是不是已經被關閉了，可以在 phpMyAdmin 的 sql 中輸入 SELECT @@GLOBAL.sql_mode 進行測試
> 如果顯示 IGNORE_SPACE,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FO 則表示 strict mode 模式已經被關閉。

參考資料：[關閉Ubuntu預設mysql5.7版的strict mode設定方法(嚴格模式)](https://www.facebook.com/notes/%E5%BE%90%E5%98%89%E8%A3%95/%E9%97%9C%E9%96%89ubuntu%E9%A0%90%E8%A8%ADmysql57%E7%89%88%E7%9A%84strict-mode%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95%E5%9A%B4%E6%A0%BC%E6%A8%A1%E5%BC%8F/10154547170683609/)
- [MySQL sql_mode 说明（及处理一起 sql_mode 引发的问题）](http://seanlook.com/2016/04/22/mysql-sql-mode-troubleshooting/)
- [MySQL Server 的 SQL Modes](https://xyz.cinc.biz/2013/08/mysql-server-sql-modes.html)




- MySQL 錯誤排除
_ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)_
_ERROR 2003 (HY000): Can't connect to MySQL server on '127.0.0.1' (111)_

- 參考資料：[ERROR 2003 (HY000): Can't connect to MySQL server on '127.0.0.1' (111)](https://stackoverflow.com/a/16164426/10680064)




# 2018-12-18

> 參考資料：[MySQL :: MySQL 8.0 Reference Manual :: 3.6.9 Using AUTO_INCREMENT](https://dev.mysql.com/doc/refman/8.0/en/example-auto-increment.html)
[SQL CREATE TABLE Statement](https://www.w3schools.com/sql/sql_create_table.asp)

[mysql 常用指令](http://note.drx.tw/2012/12/mysql-syntax.html)

- 在 CLI 建立資料表

1. 選擇在哪一個資料庫建立：`use your_database_name`
2. 就可以輸入指令了

  - 不分大小寫
  - 型態: `INT`, `TEXT`, `VARCHAR`
  - 自動排序: `auto_increment`
  - not null: 不要有預設值是 `NULL`
  - PRIMARY KEY ()

```PHP
CREATE TABLE jobs(
    id INT auto_increment,
    title VARCHAR(64) not null,
    description text not null,
    salary varchar(128) not null,
    link varchar(512) not null,
    PRIMARY KEY (id)
    );

```

![image](https://ppt.cc/fT8hwx@.png)

 - 列出資料表欄位資訊： `describe your_table_name`

![image](https://ppt.cc/f9FJYx@.png)
- 新增單筆資料到 jobs 表格
  - `INSERT INTO jobs VALUES(null, '工程師', '碼農', '40k~???k', 'http://google.com');`
  - `INSERT INTO jobs (title, description, salary, link) VALUES ('工程師', '碼農', '40k~???k', 'http://google.com');`



### 其他範例

- 刪除 1979 年出版的書籍：
  - `DELETE FROM books WHERE pub_year = 1979;`
- 把 _roots_ 的出版年改為 19483：
  - `UPDATE books SET pub_year=1983 WHERE title='roots';`
- 查詢 80 年代出版的書籍：
  - `SELECT * FROM books WHERE pub_year>1979 AND pub_year<1990;`
- 指定回傳需要的欄位：
  - `SELECT title, pub_year FROM books WHERE pub_year>1979 AND pub_year<1990;`
- 查詢多張表格的匯集資訊。例如把 book 和 author 兩張表合併，可以看到每本書是誰寫的：
  - `SELECT authors.name, books.title, FROM books, authors WHERE authors.authorid = books.authorid;`
- 把表格名稱縮短：
  `SELECT a.name, b,title FROM books b, authors a WHERE a.authorid = b.authorid;`
  `SELECT a.name, b,title FROM books AS b, authors AS a WHERE a.authorid = b.authorid;`


```


### 搜尋列變成 Google Search [參考資料](https://www.askdavetaylor.com/how_can_i_add_a_google_search_box_to_my_web_site/)

```html
<form class="form-inline my-2 my-lg-0" method="get" action="http://www.google.com/search">
    <input class="form-control mr-sm-2" type="search" placeholder="Google Search" aria-label="Search" maxlength="255" name="q" value="">
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
</form>

```


# 2018-12-19

[php rowCount()](http://php.net/manual/en/pdostatement.rowcount.php)

# 2018-12-20




- 呈現 html 換行問題
[php換行 - str_replace()](http://websolstore.com/how-to-use-nl2br-and-its-reverse-br2nl-in-php/)

```php

$post_content = str_replace("\r\n"，"<br/>"，$post_content);
$post_content = str_replace("<br/>"，"\n"，$post_content);

```

# 2018-12-21

- _待辦事項_:week7 的 todo-list 增加功能可參考[MTR02 week8](https://youtu.be/QiCm9JE43KM?t=431)。